{"version":3,"file":"video-express.cjs.development.js","sources":["../../node_modules/regenerator-runtime/runtime.js","../src/utils/dom.ts","../src/mp/styles.ts","../src/logging.ts","../src/utils/array.ts","../src/internal/hidden-tile-tracker.ts","../src/internal/video-overlay/audio-button.ts","../src/internal/video-overlay/display-name.ts","../src/internal/video-overlay/network-quality-warning.ts","../src/internal/video-overlay/overlay.ts","../src/internal/subscriber.ts","../src/mp/config-store.ts","../src/analytics.ts","../src/assets/icons/smile/index.ts","../src/mp/camera-subscriber.ts","../src/mp/layout-manager.ts","../src/mp/get-devices.ts","../src/mp/get-device-id.ts","../src/internal/publisher.ts","../src/mp/camera-publisher.ts","../src/mp/screen-publisher.ts","../src/mp/screen-subscriber.ts","../src/mp/speaker-detection.ts","../src/mp/active-speaker-tracker.ts","../src/internal/participant.ts","../src/mp/participant.ts","../src/utils/object.ts","../src/utils/is-mobile.ts","../src/utils/promise.ts","../src/internal/local-participant.ts","../src/mp/local-participant.ts","../src/internal/room.ts","../src/mp/room/index.ts","../src/mp/preview-publisher.ts","../src/mp/get-active-audio-output-device.ts","../src/mp/get-audio-output-devices.ts","../src/mp/set-proxy-url.ts","../src/mp/set-audio-output-device.ts","../src/mp/has-media-processor-support.ts","../src/index.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","export const getTargetElementFromDOM = (\n  element?: HTMLElement | string\n): HTMLElement => {\n  if (element instanceof HTMLElement) {\n    return element;\n  } else if (typeof element === 'string') {\n    const ele = document.getElementById(element);\n    if (!ele) throw new Error(`Invalid element. Element not found: ${element}`);\n    return ele;\n  } else {\n    throw new Error(`element must be string or HTMLElement. Found: ${element}`);\n  }\n};\n\nexport const createDiv = (\n  id: string,\n  style: Record<string, string> = {}\n): HTMLElement => {\n  const element: HTMLElement = document.createElement('div');\n  element.id = id;\n\n  Object.entries(style).forEach(([key, value]) => {\n    element.style.setProperty(key, value);\n  });\n  return element;\n};\n","import jss, { JssStyle } from 'jss';\nimport preset from 'jss-preset-default';\nimport camelCase from 'jss-plugin-camel-case';\n\n// One time setup with default plugins and settings.\njss.setup(preset());\njss.use(camelCase());\n\nexport const createStyles = (styles: Record<string, JssStyle>) => {\n  const { classes } = jss.createStyleSheet(styles).attach();\n  return classes;\n};\n","/* eslint-disable no-console */\nexport const logLevel = {\n  NONE: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  DEBUG: 4,\n} as const;\n\nexport type LogLevel = typeof logLevel[keyof typeof logLevel];\n\nlet currentLogLevel: LogLevel = logLevel.NONE;\n\nexport const setLogLevel = (level: LogLevel) => {\n  if (Object.values(logLevel).includes(level)) {\n    currentLogLevel = level;\n  } else {\n    console.error('Attempting to set invalid log level: ', level);\n  }\n};\n\nexport const getLogLevel = () => currentLogLevel;\n\nexport const logger = {\n  error: (...args: any) => {\n    if (currentLogLevel >= logLevel.ERROR) {\n      console.error(...args);\n    }\n  },\n  warn: (...args: any) => {\n    if (currentLogLevel >= logLevel.WARN) {\n      console.warn(...args);\n    }\n  },\n  info: (...args: any) => {\n    if (currentLogLevel >= logLevel.INFO) {\n      console.info(...args);\n    }\n  },\n  debug: (...args: any) => {\n    if (currentLogLevel >= logLevel.DEBUG) {\n      console.debug(...args);\n    }\n  },\n};\n","export const removeItem = (array: Array<any>, item: any) => {\n  const index = array.indexOf(item);\n  if (index > -1) {\n    array.splice(index, 1);\n  }\n};\n","import { removeItem } from '../utils/array';\n\nexport default class HiddenTileTracker {\n  readonly PARTICIPANT_DISPLAY_LIMIT: Number;\n  _currentActiveSpeakerElement?: HTMLElement;\n  hiddenElements: Array<HTMLElement> = [];\n  visibleElements: Array<HTMLElement> = [];\n  /*\n   * Array of video elements ordered by display priority\n   * i.e. first entry is the current active speaker or a new participant.\n   * The last entry is the participant with longest time since speaking or joining\n   */\n  _elementsOrderedByDisplayPriority: Array<HTMLElement> = [];\n\n  constructor(maxVideoParticipantsOnScreen: Number) {\n    this.PARTICIPANT_DISPLAY_LIMIT = maxVideoParticipantsOnScreen;\n  }\n\n  _removeLastActiveVisibleElement() {\n    let lastActiveVisibleElement = this.visibleElements[0];\n    this.visibleElements.forEach(element => {\n      if (\n        this._elementsOrderedByDisplayPriority.indexOf(element) <\n        this._elementsOrderedByDisplayPriority.indexOf(lastActiveVisibleElement)\n      ) {\n        lastActiveVisibleElement = element;\n      }\n    });\n    removeItem(this.visibleElements, lastActiveVisibleElement);\n    this.hiddenElements.push(lastActiveVisibleElement);\n  }\n\n  onActiveSpeakerChanged(element?: HTMLElement) {\n    this._currentActiveSpeakerElement = element;\n    if (element) {\n      removeItem(this._elementsOrderedByDisplayPriority, element);\n      this._elementsOrderedByDisplayPriority.push(element);\n\n      if (this.hiddenElements.includes(element)) {\n        removeItem(this.hiddenElements, this._currentActiveSpeakerElement);\n        this.visibleElements.push(element);\n      }\n\n      if (this.visibleElements.length > this.PARTICIPANT_DISPLAY_LIMIT) {\n        this._removeLastActiveVisibleElement();\n      }\n    }\n  }\n\n  onSubscriberCreated(element: HTMLElement) {\n    if (this.visibleElements.length >= this.PARTICIPANT_DISPLAY_LIMIT) {\n      this._removeLastActiveVisibleElement();\n    }\n    this.visibleElements.push(element);\n    this._elementsOrderedByDisplayPriority.push(element);\n  }\n\n  onSubscriberRemoved(element: HTMLElement) {\n    removeItem(this.hiddenElements, element);\n    removeItem(this.visibleElements, element);\n    removeItem(this._elementsOrderedByDisplayPriority, element);\n    if (\n      this.visibleElements.length < this.PARTICIPANT_DISPLAY_LIMIT &&\n      this.hiddenElements.length > 0\n    ) {\n      const elementToShow = this.hiddenElements.pop();\n      if (elementToShow) {\n        this.visibleElements.push(elementToShow);\n      }\n    }\n  }\n}\n","import { createStyles } from '../../mp/styles';\nimport iconMicMuted from '../../assets/icons/mic-muted.svg';\nimport iconMicEnabled from '../../assets/icons/mic-enabled.svg';\nimport iconAudioMuted from '../../assets/icons/audio-muted.svg';\nimport iconAudioEnabled from '../../assets/icons/audio-enabled.svg';\n\nconst classes = createStyles({\n  audioButton: {\n    position: 'absolute',\n    left: 12,\n    bottom: 12,\n    height: 24,\n    width: 24,\n    background: 'rgba(0, 0, 0, 0.5)',\n    backdropFilter: 'blur(15px)',\n    borderRadius: 6,\n    opacity: 0,\n    'transition-property': 'opacity',\n    'transition-duration': '0.5s',\n    'transition-timing-function': 'ease-in',\n    '&:hover': {\n      background: '#000000',\n    },\n    '&.audio-disabled': {\n      background: '#E61D1D',\n      opacity: 1,\n    },\n    '&:hover.audio-disabled': {\n      background: '#9F0202',\n    },\n    '&.audio-enabled .icon-disabled': {\n      display: 'none',\n    },\n    '&.audio-disabled .icon-enabled': {\n      display: 'none',\n    },\n    '&.subscriber-audio-button': {\n      display: 'none',\n    },\n  },\n  icon: {\n    height: 12,\n    width: 12,\n  },\n});\n\nconst createSvgIcon = (svgSrc: string, ...otherClasses: Array<string>) => {\n  const icon = document.createElement('img');\n  icon.src = svgSrc;\n  icon.classList.add(classes.icon, ...otherClasses);\n  return icon;\n};\n\nconst createAudioToggleButton = ({\n  isAudioEnabled,\n  enabledIcon,\n  disabledIcon,\n  type,\n}: {\n  isAudioEnabled: boolean;\n  enabledIcon: HTMLImageElement;\n  disabledIcon: HTMLImageElement;\n  type: 'publisher' | 'subscriber';\n}) => {\n  const button = document.createElement('button');\n  button.classList.add(\n    classes.audioButton,\n    'video-audio-button',\n    type === 'publisher' ? 'publisher-audio-button' : 'subscriber-audio-button'\n  );\n\n  button.appendChild(enabledIcon);\n  button.appendChild(disabledIcon);\n\n  if (isAudioEnabled) {\n    button.classList.add('audio-enabled');\n  } else {\n    button.classList.add('audio-disabled');\n  }\n\n  return {\n    element: button,\n    setEnabled() {\n      button.classList.remove('audio-disabled');\n      button.classList.add('audio-enabled');\n    },\n    setDisabled() {\n      button.classList.remove('audio-enabled');\n      button.classList.add('audio-disabled');\n    },\n  };\n};\n\nexport type AudioToggleButton = {\n  element: HTMLButtonElement;\n  setEnabled: () => void;\n  setDisabled: () => void;\n};\nexport const createPublisherAudioToggleButton = (\n  isAudioEnabled: boolean\n): AudioToggleButton => {\n  const disabledIcon = createSvgIcon(iconMicMuted, 'icon-disabled');\n  const enabledIcon = createSvgIcon(iconMicEnabled, 'icon-enabled');\n  return createAudioToggleButton({\n    isAudioEnabled,\n    enabledIcon,\n    disabledIcon,\n    type: 'publisher',\n  });\n};\n\nexport const createSubscriberAudioToggleButton = (\n  isAudioEnabled: boolean\n): AudioToggleButton => {\n  const disabledIcon = createSvgIcon(iconAudioMuted, 'icon-disabled');\n  const enabledIcon = createSvgIcon(iconAudioEnabled, 'icon-enabled');\n  return createAudioToggleButton({\n    isAudioEnabled,\n    enabledIcon,\n    disabledIcon,\n    type: 'subscriber',\n  });\n};\n","import { createStyles } from '../../mp/styles';\n\nconst classes = createStyles({\n  name: {\n    background: 'rgba(0, 0, 0, 0.5)',\n    backdropFilter: 'blur(15px)',\n    borderRadius: '6px',\n    paddingLeft: '8px',\n    paddingRight: '8px',\n    textAlign: 'center',\n    fontSize: '14px',\n    fontStyle: 'normal',\n    lineHeight: '24px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    maxWidth: '80%',\n    marginLeft: '12px',\n  },\n});\nexport const createNameDisplay = (name: string) => {\n  const div = document.createElement('div');\n  div.innerText = name;\n  div.classList.add(classes.name, 'participant-name');\n  return div;\n};\n","import { createStyles } from '../../mp/styles';\nimport iconNetworkQualityPoor from '../../assets/icons/red-wifi.svg';\n\nconst classes = createStyles({\n  networkQualityWarning: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '24px',\n    minWidth: '24px',\n    background: 'rgba(0, 0, 0, 0.5)',\n    backdropFilter: 'blur(15px)',\n    borderRadius: '6px',\n    opacity: 0,\n  },\n  networkQualityIcon: {\n    width: '20px',\n    height: '20px',\n  },\n  active: {\n    opacity: 1,\n  },\n});\n\ntype NetworkQualityWarning = {\n  element: HTMLElement;\n  show: () => void;\n  hide: () => void;\n};\n\nexport const createNetworkQualityWarning = (): NetworkQualityWarning => {\n  const div = document.createElement('div');\n  div.classList.add(classes.networkQualityWarning, 'network-quality-warning');\n  const icon = document.createElement('img');\n  icon.src = iconNetworkQualityPoor;\n  icon.classList.add(\n    classes.networkQualityIcon,\n    'network-quality-warning-icon'\n  );\n  div.appendChild(icon);\n  return {\n    element: div,\n    show: () => div.classList.add(classes.active),\n    hide: () => div.classList.remove(classes.active),\n  };\n};\n","import { EventEmitter } from 'events';\nimport { logger } from '../../logging';\nimport { createDiv } from '../../utils/dom';\nimport { createStyles } from '../../mp/styles';\nimport {\n  createPublisherAudioToggleButton,\n  createSubscriberAudioToggleButton,\n} from './audio-button';\nimport { createNameDisplay } from './display-name';\nimport { createNetworkQualityWarning } from './network-quality-warning';\n\nconst classes = createStyles({\n  videoOverlay: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    zIndex: 1, // opentok overlay has z-index 1.\n    '&:hover .video-audio-button': {\n      opacity: 1,\n    },\n  },\n  bottomRightContainer: {\n    maxWidth: 'calc(100% - 68px)',\n    position: 'absolute',\n    bottom: 12,\n    top: 'auto',\n    right: 12,\n    display: 'flex',\n    width: '100%',\n    justifyContent: 'flex-end',\n  },\n});\n\nexport type VideoOverlay = {\n  on(event: 'toggleAudioClicked', listener: () => void): void;\n  emit(event: 'toggleAudioClicked'): void;\n  setAudioEnabled: () => void;\n  setAudioDisabled: () => void;\n  showNetworkQualityWarning: () => void;\n  hideNetworkQualityWarning: () => void;\n};\n\nconst createOverlay = ({\n  targetId,\n  participantName,\n  isAudioEnabled,\n  type,\n}: {\n  targetId: string;\n  participantName?: string;\n  isAudioEnabled: boolean;\n  type: 'publisher' | 'subscriber';\n}): VideoOverlay | undefined => {\n  const targetVideoContainerDiv = document.getElementById(targetId);\n  if (!targetVideoContainerDiv) {\n    logger.warn('Target div not found when creating overlay: ', targetId);\n    return;\n  }\n\n  let overlayClass;\n  let overlayId;\n  let audioToggleButton;\n  if (type === 'publisher') {\n    overlayClass = 'MP_publisher_overlay';\n    overlayId = 'MP_camera_publisher_default_controls';\n    audioToggleButton = createPublisherAudioToggleButton(isAudioEnabled);\n  } else {\n    overlayClass = 'MP_subscriber_overlay';\n    overlayId = `MP_${targetId}_default_controls`;\n    audioToggleButton = createSubscriberAudioToggleButton(isAudioEnabled);\n  }\n\n  const overlayDiv = createDiv(overlayId);\n  overlayDiv.classList.add(classes.videoOverlay, overlayClass);\n\n  overlayDiv.appendChild(audioToggleButton.element);\n\n  const bottomRightContainer = document.createElement('div');\n  bottomRightContainer.classList.add(classes.bottomRightContainer);\n  const networkQualityWarning = createNetworkQualityWarning();\n  bottomRightContainer.appendChild(networkQualityWarning.element);\n  if (participantName) {\n    const nameElement = createNameDisplay(participantName);\n    bottomRightContainer.appendChild(nameElement);\n  }\n  overlayDiv.appendChild(bottomRightContainer);\n\n  targetVideoContainerDiv.appendChild(overlayDiv);\n\n  const overlay = Object.assign(new EventEmitter(), {\n    setAudioEnabled: audioToggleButton.setEnabled,\n    setAudioDisabled: audioToggleButton.setDisabled,\n    showNetworkQualityWarning: networkQualityWarning.show,\n    hideNetworkQualityWarning: networkQualityWarning.hide,\n  });\n\n  audioToggleButton.element.addEventListener('click', () => {\n    overlay.emit('toggleAudioClicked');\n  });\n\n  return overlay;\n};\n\nexport const createPublisherOverlay = ({\n  id,\n  isAudioEnabled,\n  participantName,\n}: {\n  id: string;\n  isAudioEnabled: boolean;\n  participantName?: string;\n}): VideoOverlay | undefined =>\n  createOverlay({\n    targetId: id,\n    isAudioEnabled,\n    participantName,\n    type: 'publisher',\n  });\n\nexport const createSubscriberOverlay = ({\n  id,\n  participantName,\n}: {\n  id: string;\n  participantName: string;\n}): VideoOverlay | undefined =>\n  createOverlay({\n    targetId: id,\n    isAudioEnabled: true,\n    participantName,\n    type: 'subscriber',\n  });\n","import OT from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport { throttle } from 'lodash';\nimport { logger } from '../logging';\nimport { createSubscriberOverlay, VideoOverlay } from './video-overlay/overlay';\n\ndeclare interface Subscriber {\n  on(event: 'audioLevelUpdated', listener: (audioLevel: number) => void): this;\n  on(event: 'videoElementCreated', listener: () => void): this;\n  on(event: 'destroyed', listener: () => void): this;\n}\n\nclass Subscriber extends EventEmitter {\n  otSubscriber: OT.Subscriber;\n  id: string | undefined;\n  overlay: VideoOverlay | undefined;\n  _subscribingToAudio: boolean;\n\n  constructor(otSubscriber: OT.Subscriber) {\n    super();\n    this.otSubscriber = otSubscriber;\n    this.id = otSubscriber.id;\n    this._subscribingToAudio = true;\n\n    const _onAudioLevelUpdated = (event: { audioLevel: number }) => {\n      this.emit('audioLevelUpdated', event.audioLevel);\n    };\n\n    const audioLevelUpdatedHandler = throttle(_onAudioLevelUpdated, 60, {\n      // So we don't send events after stream is destroyed\n      leading: true,\n      trailing: false,\n    });\n\n    this.otSubscriber.on('audioLevelUpdated', audioLevelUpdatedHandler);\n    this.otSubscriber.on('destroyed', () => this.emit('destroyed'));\n    this.otSubscriber.on('videoElementCreated', () => {\n      if (this.otSubscriber?.stream?.videoType !== 'screen') {\n        if (this.id) {\n          this.overlay = createSubscriberOverlay({\n            id: this.id,\n            participantName: this.otSubscriber.stream?.name ?? '',\n          });\n          this.overlay?.on('toggleAudioClicked', () => {\n            this._toggleAudioEnabled();\n          });\n        } else {\n          logger.warn('Subscriber id undefined when trying to create overlay');\n        }\n      }\n      this.emit('videoElementCreated');\n    });\n    this.otSubscriber.on('videoDisableWarning', () =>\n      this.overlay?.showNetworkQualityWarning()\n    );\n    this.otSubscriber.on('videoDisableWarningLifted', () =>\n      this.overlay?.hideNetworkQualityWarning()\n    );\n    this.otSubscriber.on('videoDisabled', ({ reason }) => {\n      if (reason === 'quality') {\n        this.overlay?.showNetworkQualityWarning();\n      }\n    });\n    this.otSubscriber.on('videoEnabled', ({ reason }) => {\n      if (reason === 'quality') {\n        this.overlay?.hideNetworkQualityWarning();\n      }\n    });\n  }\n  _toggleAudioEnabled = () => {\n    if (this._subscribingToAudio) {\n      this.disableAudio();\n    } else {\n      this.enableAudio();\n    }\n  };\n\n  getSubscriberElement = () => this.otSubscriber?.element;\n\n  isVideoEnabled = (): boolean => !!this.otSubscriber?.stream?.hasVideo;\n\n  isAudioEnabled = (): boolean => !!this.otSubscriber?.stream?.hasAudio;\n\n  _setSubscribeToVideo = (shouldSubscribe: boolean): void =>\n    this.otSubscriber?.subscribeToVideo(shouldSubscribe);\n  enableVideo = (): void => {\n    this.otSubscriber?.subscribeToVideo(true);\n  };\n\n  disableVideo = (): void => this.otSubscriber?.subscribeToVideo(false);\n\n  enableAudio = (): void => {\n    this.otSubscriber?.subscribeToAudio(true);\n    this._subscribingToAudio = true;\n    this.overlay?.setAudioEnabled();\n  };\n\n  disableAudio = (): void => {\n    this.otSubscriber?.subscribeToAudio(false);\n    this._subscribingToAudio = false;\n    this.overlay?.setAudioDisabled();\n  };\n\n  setDisabledImageURI = (imageURI: string): void => {\n    this.otSubscriber?.setStyle('backgroundImageURI', imageURI);\n  };\n}\n\nexport default Subscriber;\n","let proxyUrl: string;\n\nconst ConfigStore = {\n  setProxyUrl: (url: string) => {\n    proxyUrl = url;\n  },\n  getProxyUrl: () => proxyUrl,\n};\n\nexport default ConfigStore;\n","import OTKAnalytics from 'opentok-solutions-logging';\nimport ConfigStore from './mp/config-store';\n\n/** Analytics */\n\nconst logVariation = {\n  attempt: 'Attempt',\n  success: 'Success',\n  failure: 'Failure',\n} as const;\n\nconst logAction = {\n  // vars for the analytics logs. Internal use\n  initRoom: 'InitRoom',\n  joinRoom: 'JoinRoom',\n  leaveRoom: 'LeaveRoom',\n  startScreenSharing: 'StartScreenSharing',\n  stopScreenSharing: 'StopScreenSharing',\n  publishCameraPublisher: 'PublishCameraPublisher',\n  destroyCameraPublisher: 'DestroyCameraPublisher',\n  cameraPublisherEnableVideo: 'CameraPublisherEnableVideo',\n  cameraPublisherEnableAudio: 'CameraPublisherEnableAudio',\n  cameraPublisherDisableVideo: 'CameraPublisherDisableVideo',\n  cameraPublisherDisableAudio: 'CameraPublisherDisableAudio',\n  screenPublisherEnableVideo: 'ScreenPublisherEnableVideo',\n  screenPublisherEnableAudio: 'ScreenPublisherEnableAudio',\n  screenPublisherDisableVideo: 'ScreenPublisherDisableVideo',\n  screenPublisherDisableAudio: 'ScreenPublisherDisableAudio',\n  cameraSubscriberEnableVideo: 'CameraSubscriberEnableVideo',\n  cameraSubscriberEnableAudio: 'CameraSubscriberEnableAudio',\n  cameraSubscriberDisableVideo: 'CameraSubscriberDisableVideo',\n  cameraSubscriberDisableAudio: 'CameraSubscriberDisableAudio',\n  screenSubscriberEnableVideo: 'ScreenSubscriberEnableVideo',\n  screenSubscriberEnableAudio: 'ScreenSubscriberEnableAudio',\n  screenSubscriberDisableVideo: 'ScreenSubscriberDisableVideo',\n  screenSubscriberDisableAudio: 'ScreenSubscriberDisableAudio',\n  initPreviewPublisher: 'InitPreviewPublisher',\n  destroyPreviewPublisher: 'DestroyPreviewPublisher',\n  previewPublisherEnableVideo: 'PreviewPublisherEnableVideo',\n  previewPublisherEnableAudio: 'PreviewPublisherEnableAudio',\n  previewPublisherDisableVideo: 'PreviewPublisherDisableVideo',\n  previewPublisherDisableAudio: 'PreviewPublisherDisableAudio',\n  setVideoDevice: 'SetVideoDevice',\n  setAudioDevice: 'SetAudioDevice',\n  getAudioOutputDevices: 'GetAudioOutputDevices',\n  getActiveAudioOutputDevice: 'GetActiveAudioOutputDevice',\n  getVideoDevice: 'GetVideoDevice',\n  getAudioDevice: 'GetAudioDevice',\n  getDevices: 'GetDevices',\n  createCameraSubscriber: 'CreateCameraSubscriber',\n  createScreenSubscriber: 'CreateScreenSubscriber',\n  setProxyUrl: 'SetProxyUrl',\n  setAudioOutputDevice: 'SetAudioOutputDevice',\n  setVideoFilter: 'SetVideoFilter',\n  clearVideoFilter: 'ClearVideoFilter',\n} as const;\n\ntype AnalyticsProps = {\n  source?: string;\n  sessionId?: string;\n  connectionId?: string;\n  apiKey?: string;\n};\n\ntype AnalyticsOptions = {\n  proxyUrl?: string;\n};\n\ntype LogAction = typeof logAction[keyof typeof logAction];\ntype LogVariation = typeof logVariation[keyof typeof logVariation];\n\nconst defaultProps: AnalyticsProps = {\n  source: window.location.origin,\n};\n\nclass Analytics {\n  analytics: OTKAnalytics;\n\n  constructor(analyticsProps: AnalyticsProps = defaultProps) {\n    const {\n      source = window.location.origin,\n      sessionId,\n      connectionId,\n      apiKey,\n    } = analyticsProps;\n\n    const otkanalyticsData = {\n      clientVersion: process.env.CLIENT_VERSION || 'video-express-x.y.z',\n      source,\n      componentId: 'video-express',\n      name: 'video-express',\n      partnerId: apiKey,\n      sessionId,\n    };\n\n    const options: AnalyticsOptions = {};\n    const proxyUrl: string = ConfigStore.getProxyUrl();\n\n    // Make sure to proxy VE-specific logs too\n    if (proxyUrl) {\n      options.proxyUrl = proxyUrl;\n    }\n\n    this.analytics = new OTKAnalytics(otkanalyticsData, options);\n\n    if (sessionId && connectionId && apiKey) {\n      this.update(sessionId, connectionId, apiKey);\n    }\n  }\n\n  update = (\n    sessionId: string | undefined,\n    connectionId: string,\n    apiKey: string\n  ) => {\n    if (sessionId && connectionId && apiKey) {\n      const sessionInfo = {\n        sessionId,\n        connectionId,\n        partnerId: apiKey,\n      };\n      this.analytics.addSessionInfo(sessionInfo);\n    }\n  };\n\n  log = (action: LogAction, variation: LogVariation, payload?: any) => {\n    if (!process.env.ENABLE_LOGGING) {\n      return;\n    }\n    const data: {\n      action: LogAction;\n      variation: LogVariation;\n      payload?: any;\n    } = {\n      action,\n      variation,\n    };\n    if (payload) {\n      data.payload = payload;\n    }\n    this.analytics.logEvent(data);\n  };\n}\nexport { Analytics, logVariation, logAction };\n","const data =\n  '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';\nconst smileIconDataURI = `data:image/png;base64,${data}`;\nexport default smileIconDataURI;\n","import {\n  Stream,\n  Subscriber as OTSubscriber,\n  Session,\n  OTError,\n} from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport Subscriber from '../internal/subscriber';\nimport { Analytics, logAction, logVariation } from '../analytics';\nimport { logger } from '../logging';\nimport iconSmileyFace from '../assets/icons/smile';\nimport { createStyles } from '../mp/styles';\n\nexport const classes = createStyles({\n  subscriberOnLoad: {\n    display: ['none', '!important'],\n  },\n});\n\ndeclare interface CameraSubscriber {\n  on(\n    event: 'audioLevelUpdated',\n    listener: (audioLevel: number, movingAvg: number) => void\n  ): this;\n  on(event: 'created', listener: () => void): this;\n  on(event: 'destroyed', listener: () => void): this;\n}\n\nclass CameraSubscriber extends EventEmitter {\n  // @ts-ignore @TODO: Verify whether _stream variable required for this class?\n  private _stream: Stream;\n  private movingAvg: number | null;\n  id: string;\n  setOptimalPreferredResolution: () => void;\n  getSubscriberElement: () => HTMLElement | undefined;\n  isVideoEnabled: () => boolean;\n  isAudioEnabled: () => boolean;\n  enableVideo: () => void;\n  disableVideo: () => void;\n  enableAudio: () => void;\n  disableAudio: () => void;\n  setDisabledImageURI: (imageURI: string) => void;\n\n  constructor(\n    stream: Stream,\n    otSubscriber: OTSubscriber,\n    analytics: Analytics\n  ) {\n    super();\n    this._stream = stream;\n    this.movingAvg = null;\n    const _subscriber = new Subscriber(otSubscriber);\n    this.id = _subscriber.id as string;\n\n    _subscriber.on('audioLevelUpdated', (audioLevel: number) => {\n      if (this.movingAvg === null || this.movingAvg <= audioLevel) {\n        this.movingAvg = audioLevel;\n      } else {\n        this.movingAvg = 0.7 * this.movingAvg + 0.3 * audioLevel;\n      }\n      // 1.5 scaling to map the -30 - 0 dBm range to [0,1]\n      let logLevel = Math.log(this.movingAvg) / Math.LN10 / 1.5 + 1;\n      logLevel = Math.min(Math.max(logLevel, 0), 1);\n      this.emit('audioLevelUpdated', audioLevel, logLevel);\n    });\n\n    _subscriber.on('destroyed', () => {\n      this.emit('destroyed');\n    });\n\n    _subscriber.on('videoElementCreated', () => {\n      this.emit('created');\n    });\n\n    this.setOptimalPreferredResolution = () => {\n      if (_subscriber) {\n        const { otSubscriber } = _subscriber;\n        const videoElementWidth = otSubscriber.element?.offsetWidth;\n        const videoElementHeight = otSubscriber.element?.offsetHeight;\n        if (videoElementWidth && videoElementHeight) {\n          const preferredResolution = {\n            width: videoElementWidth * window.devicePixelRatio,\n            height: videoElementHeight * window.devicePixelRatio,\n          };\n          otSubscriber.setPreferredResolution(preferredResolution);\n        }\n      }\n    };\n\n    this.getSubscriberElement = () => _subscriber?.getSubscriberElement();\n\n    this.isVideoEnabled = () => _subscriber?.isVideoEnabled();\n\n    this.isAudioEnabled = () => _subscriber?.isAudioEnabled();\n\n    this.enableVideo = () => {\n      analytics.log(\n        logAction.cameraSubscriberEnableVideo,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.enableVideo();\n        logger.debug('Enabled subscriber video: ', this.id);\n        analytics.log(\n          logAction.cameraSubscriberEnableVideo,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.cameraSubscriberEnableVideo,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.disableVideo = () => {\n      analytics.log(\n        logAction.cameraSubscriberDisableVideo,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.disableVideo();\n        logger.debug('Disabled subscriber video: ', this.id);\n        analytics.log(\n          logAction.cameraSubscriberDisableVideo,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.cameraSubscriberDisableVideo,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.enableAudio = () => {\n      analytics.log(\n        logAction.cameraSubscriberEnableAudio,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.enableAudio();\n        analytics.log(\n          logAction.cameraSubscriberEnableAudio,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.cameraSubscriberEnableAudio,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.disableAudio = () => {\n      analytics.log(\n        logAction.cameraSubscriberDisableAudio,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.disableAudio();\n        analytics.log(\n          logAction.cameraSubscriberDisableAudio,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.cameraSubscriberDisableAudio,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.setDisabledImageURI = (imageURI: string): void => {\n      _subscriber.setDisabledImageURI(imageURI);\n    };\n  }\n}\n\nexport default CameraSubscriber;\n\n/* We can't use a promise here because the videoElementCreated event may be fired between\n * calling resolve() and the success handler being executed. Instead we use a synchronous callback.\n */\nexport const createCameraSubscriber = (\n  session: Session,\n  stream: Stream,\n  shouldEnableVideo: boolean,\n  analytics: Analytics,\n  callback: (error?: OTError, cameraSubscriber?: CameraSubscriber) => void\n) => {\n  const _otSubscriber = session.subscribe(\n    stream,\n    'layoutContainer',\n    {\n      insertMode: 'append',\n      subscribeToVideo: shouldEnableVideo,\n      style: {\n        buttonDisplayMode: 'off',\n        nameDisplayMode: 'off',\n        videoDisabledDisplayMode: 'off',\n        backgroundImageURI: iconSmileyFace,\n      },\n    },\n    error => {\n      analytics.log(logAction.createCameraSubscriber, logVariation.attempt);\n      if (error) {\n        analytics.log(logAction.createCameraSubscriber, logVariation.failure, {\n          error,\n        });\n        callback(error);\n      } else {\n        const cameraSubscriber = new CameraSubscriber(\n          stream,\n          _otSubscriber,\n          analytics\n        );\n        callback(undefined, cameraSubscriber);\n        analytics.log(logAction.createCameraSubscriber, logVariation.success);\n      }\n    }\n  );\n  if (_otSubscriber.element instanceof HTMLElement) {\n    // hide loading subscriber videos until ready to be displayed by layout manager\n    _otSubscriber.element?.classList.add(classes.subscriberOnLoad);\n  }\n};\n","import { EventEmitter } from 'events';\nimport {\n  default as initLayout,\n  Options,\n  LayoutContainer,\n} from 'opentok-layout-js';\nimport ResizeObserverPolyfill from 'resize-observer-polyfill';\nimport { throttle, debounce } from 'lodash';\nimport { LayoutMode } from '../utils/types';\nimport { getTargetElementFromDOM, createDiv } from '../utils/dom';\nimport { createStyles } from './styles';\nimport { logger } from '../logging';\nimport HiddenTileTracker from '../internal/hidden-tile-tracker';\nimport { removeItem } from '../utils/array';\nimport { classes } from './camera-subscriber';\n\nconst LARGE_CLASS_NAME = 'OT_big';\nconst DEFAULT_MOBILE_PARTICIPANTS = 3;\nconst DEFAULT_DESKTOP_PARTICIPANTS = 25;\nconst ACTIVE_SPEAKER_HIGHLIGHT_CLASS = 'active_speaker_highlight';\nconst DEFAULT_ACTIVE_SPEAKER_COLOR = '#53CA6A';\n\ntype FixedOTLayoutJSOptions = Pick<\n  Options,\n  'animate' | 'bigClass' | 'window' | 'ignoreClass'\n>;\n\n// Omit exposing layout options that we need to control i.e. animation and class internals\ntype CustomizableOTLayoutJSOptions = Omit<\n  Options,\n  keyof FixedOTLayoutJSOptions\n>;\n\nconst defaultLayoutOptions: CustomizableOTLayoutJSOptions = {\n  fixedRatio: false,\n  alignItems: 'center',\n  bigPercentage: 0.8,\n  bigFixedRatio: false,\n  bigAlignItems: 'center',\n  smallAlignItems: 'center',\n  maxWidth: Infinity,\n  maxHeight: Infinity,\n  smallMaxWidth: Infinity,\n  smallMaxHeight: Infinity,\n  bigMaxWidth: Infinity,\n  bigMaxHeight: Infinity,\n  bigMaxRatio: 3 / 2,\n  bigMinRatio: 9 / 16,\n  bigFirst: true,\n};\n\nconst fixedLayoutOptions: FixedOTLayoutJSOptions = {\n  bigClass: LARGE_CLASS_NAME,\n  window,\n  animate: false,\n  ignoreClass: 'OT_ignore',\n};\n\nconst getClasses = (speakerHighlightColor?: string) => {\n  const outerMargin = 8;\n  const marginOffset = 2 * outerMargin; // i.e. marginTop + marginBottom or marginLeft + marginRight\n  return createStyles({\n    layoutContainer: {\n      margin: outerMargin,\n      width: `calc(100% - ${marginOffset}px)`,\n      height: `calc(100% - ${marginOffset}px)`,\n      position: 'relative',\n      '& > *': {\n        width: 0,\n        height: 0,\n        opacity: 0,\n      },\n      '& > .ot-layout': {\n        opacity: 1,\n      },\n      '& > .OT_publisher, & > .OT_subscriber': {\n        margin: 4,\n        borderRadius: 16,\n        // Fix for safari border radius https://stackoverflow.com/a/16681137/5433407\n        '-webkit-backface-visibility': 'hidden',\n        '-webkit-transform': 'translate3d(0, 0, 0)',\n      },\n      '& > .OT_subscriber.MP_screenshare_subscriber': {\n        borderRadius: 0,\n      },\n      [`& > .OT_subscriber.${ACTIVE_SPEAKER_HIGHLIGHT_CLASS}`]: {\n        borderColor: `${speakerHighlightColor || DEFAULT_ACTIVE_SPEAKER_COLOR}`,\n        borderWidth: `3px`,\n        borderStyle: `solid`,\n      },\n    },\n    layoutContainerWrapper: {\n      width: '100%',\n      height: '100%',\n      overflow: 'auto',\n    },\n  });\n};\n\nexport type LayoutOptions = {\n  layoutMode?: LayoutMode;\n  speakerHighlightEnabled?: boolean;\n  speakerHighlightColor?: string;\n  cameraPublisherContainer?: HTMLElement | string;\n  screenPublisherContainer?: HTMLElement | string;\n  isMobileLayout: boolean;\n};\n\ndeclare interface LayoutManager {\n  on(event: 'layoutComplete', listener: () => void): this;\n  on(\n    event: 'cameraSubscriberHidden',\n    listener: (subscriberId: string) => void\n  ): this;\n  on(\n    event: 'cameraSubscriberDisplayed',\n    listener: (subscriberId: string) => void\n  ): this;\n}\n\nclass LayoutManager extends EventEmitter {\n  _layoutContainer: LayoutContainer;\n  _layoutContainerElement: HTMLElement;\n  _activeSpeakerElement?: HTMLElement;\n  _screenSharingElementIds: Array<string> = [];\n  _cameraSubscriberElementIds: Array<string> = [];\n  _layoutMode: LayoutMode = 'grid';\n  isViewingScreenshare: boolean = false;\n  _emitLayoutRecalculated: () => void;\n  _isMobileLayout: boolean;\n  _hiddenTileTracker: HiddenTileTracker;\n  _speakerHighlightColor?: string;\n  _speakerHighlightEnabled?: boolean;\n\n  constructor(\n    targetElement: HTMLElement | string,\n    layoutOptions: LayoutOptions,\n    maxVideoParticipantsOnScreen?: Number\n  ) {\n    super();\n    const { layoutMode = 'grid', ...customOTLayoutJsOptions } = layoutOptions;\n    this._layoutMode = layoutMode;\n    this._isMobileLayout = layoutOptions.isMobileLayout;\n\n    this._speakerHighlightColor = layoutOptions.speakerHighlightColor;\n    this._speakerHighlightEnabled = layoutOptions.speakerHighlightEnabled;\n\n    if (this._speakerHighlightColor && !this._speakerHighlightEnabled) {\n      logger.warn(\n        'You passed speakerHighlightColor value without setting speakerHighlightEnabled'\n      );\n    }\n\n    const maxRatio = this._isMobileLayout ? 16 / 9 : 14 / 16;\n    const minRatio = this._isMobileLayout ? 3 / 2 : 9 / 16;\n\n    defaultLayoutOptions.maxRatio = maxRatio;\n    defaultLayoutOptions.minRatio = minRatio;\n\n    this._layoutContainerElement = this._initLayoutContainerElement(\n      targetElement\n    );\n    this._emitLayoutRecalculated = debounce(() => {\n      this.emit('layoutComplete');\n    }, 20); // wait for CSS transition to finish before sending event. If no transition (0) then add small delay anyway\n\n    this._layoutContainer = initLayout(this._layoutContainerElement, {\n      ...defaultLayoutOptions,\n      ...customOTLayoutJsOptions, // Overwrite default layout options with users custom options\n      ...fixedLayoutOptions, // Fixed layout options last to ensure not overwritten by user\n    });\n\n    this._initContainerResizeListener();\n\n    // Max onscreen video participants: default or user-specified parameter depending on mobile/desktop layout\n    if (this._isMobileLayout) {\n      this._hiddenTileTracker = new HiddenTileTracker(\n        DEFAULT_MOBILE_PARTICIPANTS\n      );\n    } else {\n      this._hiddenTileTracker = new HiddenTileTracker(\n        maxVideoParticipantsOnScreen || DEFAULT_DESKTOP_PARTICIPANTS\n      );\n    }\n  }\n\n  _initLayoutContainerElement = (\n    roomContainerElement: HTMLElement | string\n  ) => {\n    let roomContainer: HTMLElement = getTargetElementFromDOM(\n      roomContainerElement\n    );\n\n    const layoutContainerElement = createDiv('layoutContainer');\n    const layoutContainerWrapperElement = createDiv('layoutContainerWrapper');\n\n    const classes = getClasses(this._speakerHighlightColor);\n    layoutContainerElement.classList.add(classes.layoutContainer);\n    layoutContainerWrapperElement.classList.add(classes.layoutContainerWrapper);\n\n    layoutContainerWrapperElement.appendChild(layoutContainerElement);\n    roomContainer.appendChild(layoutContainerWrapperElement);\n\n    return layoutContainerElement;\n  };\n\n  _initContainerResizeListener = () => {\n    const throttledRecalculateLayout = throttle(\n      () => this._recalculateTileSizes(),\n      20\n    );\n    const resizeObserver = new ResizeObserverPolyfill(() => {\n      throttledRecalculateLayout();\n    });\n    resizeObserver.observe(this._layoutContainerElement);\n  };\n\n  setLayoutMode = (layoutMode: LayoutMode) => {\n    this._layoutMode = layoutMode;\n    this.updateLayout();\n  };\n\n  _setElementBig = (element: HTMLElement) => {\n    element.classList.add(LARGE_CLASS_NAME);\n  };\n\n  _setElementSmall = (element: HTMLElement) => {\n    element.classList.remove(LARGE_CLASS_NAME);\n  };\n\n  _hideElement = (element: HTMLElement) => {\n    const currentStyle = getComputedStyle(element);\n    if (currentStyle.display !== 'none') {\n      element.style.display = 'none';\n      if (this._cameraSubscriberElementIds.includes(element.id)) {\n        this.emit('cameraSubscriberHidden', element.id);\n      }\n    }\n  };\n\n  _displayElement = (element: HTMLElement) => {\n    const currentStyle = getComputedStyle(element);\n    if (currentStyle.display !== 'block') {\n      element.style.display = 'block';\n      if (this._cameraSubscriberElementIds.includes(element.id)) {\n        this.emit('cameraSubscriberDisplayed', element.id);\n      }\n    }\n  };\n\n  _removeSubscriberOnLoad = (element: HTMLElement) => {\n    element.classList.remove(classes.subscriberOnLoad);\n  };\n\n  _setAllElementsSmall = () => {\n    this._layoutContainerElement.childNodes.forEach(node => {\n      if (node instanceof HTMLElement) {\n        this._setElementSmall(node);\n      }\n    });\n  };\n\n  _setOnlyScreenElementsBig = () => {\n    this._layoutContainerElement.childNodes.forEach(node => {\n      if (!(node instanceof HTMLElement)) {\n        return;\n      }\n      if (!this._screenSharingElementIds.includes(node.id)) {\n        this._setElementSmall(node);\n      } else {\n        this._setElementBig(node);\n      }\n    });\n  };\n\n  _setOnlyActiveSpeakerElementBig = () => {\n    const elementToSetBig = this._getActiveSpeakerViewLargeElement();\n    this._setAllElementsSmall();\n\n    if (elementToSetBig) {\n      this._setElementBig(elementToSetBig);\n    }\n  };\n\n  _getActiveSpeakerViewLargeElement = (): HTMLElement | undefined => {\n    if (this._activeSpeakerElement) {\n      return this._activeSpeakerElement;\n    }\n    const subscriber = this._layoutContainerElement.querySelector(\n      '.OT_subscriber'\n    );\n    if (subscriber) {\n      return subscriber as HTMLElement;\n    }\n    const publisher = this._layoutContainerElement.querySelector(\n      '.OT_publisher'\n    );\n    if (publisher) {\n      return publisher as HTMLElement;\n    }\n    logger.error(\n      'No publisher or subscriber elements found when setting active speaker layout'\n    );\n    return;\n  };\n\n  _displayOnlyScreenElement = () => {\n    this._layoutContainerElement.childNodes.forEach(node => {\n      if (!(node instanceof HTMLElement)) {\n        return;\n      }\n      if (!this._screenSharingElementIds.includes(node.id)) {\n        this._hideElement(node);\n      } else {\n        this._setElementBig(node);\n      }\n    });\n  };\n\n  _displayOnlyActiveSpeaker = () => {\n    const elementToSetBig = this._getActiveSpeakerViewLargeElement();\n    this._layoutContainerElement.childNodes.forEach(node => {\n      if (!(node instanceof HTMLElement)) {\n        return;\n      } else if (node !== elementToSetBig) {\n        this._hideElement(node);\n      } else {\n        this._displayElement(node);\n      }\n    });\n  };\n\n  _displayLimitedGridElements = () => {\n    this._layoutContainerElement.childNodes.forEach(node => {\n      if (!(node instanceof HTMLElement)) {\n        return;\n      } else if (this._hiddenTileTracker?.hiddenElements.includes(node)) {\n        this._hideElement(node);\n      } else {\n        this._displayElement(node);\n      }\n    });\n  };\n\n  onActiveSpeakerChanged({\n    newActiveSpeakerElement,\n    previousActiveSpeakerElement,\n  }: {\n    newActiveSpeakerElement?: HTMLElement;\n    previousActiveSpeakerElement?: HTMLElement;\n  }) {\n    this._activeSpeakerElement = newActiveSpeakerElement;\n\n    // new active speaker detected, highight them and remove the previous one\n    if (this._speakerHighlightEnabled) {\n      if (previousActiveSpeakerElement) {\n        previousActiveSpeakerElement.classList.remove(\n          ACTIVE_SPEAKER_HIGHLIGHT_CLASS\n        );\n      }\n\n      if (newActiveSpeakerElement) {\n        newActiveSpeakerElement.classList.add(ACTIVE_SPEAKER_HIGHLIGHT_CLASS);\n      }\n    }\n\n    this._hiddenTileTracker?.onActiveSpeakerChanged(newActiveSpeakerElement);\n    this.updateLayout();\n  }\n\n  onActiveSpeakerStatusChanged({ isSpeaking }: { isSpeaking: boolean }) {\n    if (this._speakerHighlightEnabled) {\n      const addOrRemoveClass = isSpeaking ? 'add' : 'remove';\n      this._activeSpeakerElement?.classList[addOrRemoveClass](\n        ACTIVE_SPEAKER_HIGHLIGHT_CLASS\n      );\n    }\n  }\n\n  _recalculateTileSizes() {\n    this._layoutContainer.layout();\n    this._emitLayoutRecalculated();\n  }\n\n  _isSubscribingToScreen = () => this._screenSharingElementIds.length > 0;\n\n  onScreenSubscriberCreated = (subscriberId?: string) => {\n    if (subscriberId) {\n      this._screenSharingElementIds.push(subscriberId);\n      this.isViewingScreenshare = true;\n    }\n    this.updateLayout();\n  };\n\n  onScreenSubscriberDestroyed = (subscriberId?: string) => {\n    if (subscriberId) {\n      removeItem(this._screenSharingElementIds, subscriberId);\n    }\n    if (this._screenSharingElementIds.length === 0) {\n      this.isViewingScreenshare = false;\n    }\n    this.updateLayout();\n  };\n\n  onCameraSubscriberCreated = (element: HTMLElement | undefined) => {\n    if (element) {\n      this._hiddenTileTracker?.onSubscriberCreated(element);\n      this._cameraSubscriberElementIds.push(element.id);\n      this.emit('cameraSubscriberDisplayed', element.id);\n    }\n    this.updateLayout();\n  };\n\n  onCameraSubscriberDestroyed = (element: HTMLElement | undefined) => {\n    if (element) {\n      this._hiddenTileTracker?.onSubscriberRemoved(element);\n      removeItem(this._cameraSubscriberElementIds, element.id);\n    }\n    this.updateLayout();\n  };\n\n  getLayoutContainerElement() {\n    return this._layoutContainerElement;\n  }\n\n  updateLayout() {\n    if (this._isMobileLayout) {\n      if (this.isViewingScreenshare) {\n        this._displayOnlyScreenElement();\n      } else if (this._layoutMode === 'active-speaker') {\n        this._displayOnlyActiveSpeaker();\n      } else {\n        this._displayLimitedGridElements();\n      }\n    } else {\n      if (this.isViewingScreenshare) {\n        this._setOnlyScreenElementsBig();\n      } else if (this._layoutMode === 'active-speaker') {\n        this._setOnlyActiveSpeakerElementBig();\n      } else {\n        this._setAllElementsSmall();\n      }\n      this._displayLimitedGridElements();\n    }\n    this._recalculateTileSizes();\n  }\n}\n\nexport default LayoutManager;\n","import OT from '@opentok/client';\n\nimport { Device } from '../types/device';\nimport { Analytics, logAction, logVariation } from '../analytics';\nconst analytics = new Analytics();\n\nconst getDevices = (): Promise<Device[] | undefined> => {\n  return new Promise((resolve, reject) => {\n    analytics.log(logAction.getDevices, logVariation.attempt);\n    OT.getDevices((error, devices) => {\n      if (error) {\n        analytics.log(logAction.getDevices, logVariation.failure, { error });\n        reject(error);\n      }\n      analytics.log(logAction.getDevices, logVariation.success);\n      resolve(devices);\n    });\n  });\n};\nexport default getDevices;\n","import getDevices from './get-devices';\n\nconst getDeviceIdFromSettings = (track: MediaStreamTrack): string | undefined =>\n  track.getSettings ? track.getSettings().deviceId : '';\n\nconst getDeviceIdFromDevicesList = async (\n  track: MediaStreamTrack\n): Promise<string | null> => {\n  let devices;\n  let deviceId = null;\n  try {\n    devices = await getDevices();\n    if (devices && devices.length) {\n      const currentDevice = devices.find(\n        device => device.label === track.label\n      );\n      if (currentDevice) {\n        deviceId = currentDevice.deviceId;\n      }\n    }\n  } catch (e) {\n    // Don't need to throw. Instead, we'll just return null;\n  }\n  return deviceId;\n};\n\nconst getDeviceId = async (track: MediaStreamTrack): Promise<string> =>\n  getDeviceIdFromSettings(track) ||\n  (await getDeviceIdFromDevicesList(track)) ||\n  '';\n\nexport default getDeviceId;\n","import OT, { Device } from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport { throttle } from 'lodash';\nimport { logger } from '../logging';\nimport getDeviceId from '../mp/get-device-id';\nimport { VideoOverlay, createPublisherOverlay } from './video-overlay/overlay';\nimport iconSmileyFace from '../assets/icons/smile';\nimport { VideoFilter } from '../utils/types';\n\nconst _attachEventsToOTPublisher = (\n  self: Publisher,\n  publisher: OT.Publisher\n): void => {\n  const _onAudioLevelUpdated = (event: { audioLevel: number }) => {\n    self.emit('audioLevelUpdated', event.audioLevel);\n  };\n\n  const audioLevelUpdatedHandler = throttle(_onAudioLevelUpdated, 60, {\n    // So we don't send events after stream is destroyed\n    leading: true,\n    trailing: false,\n  });\n\n  publisher.on('destroyed', () => self.onDestroyed());\n\n  publisher.on('videoElementCreated', self._onVideoElementCreated);\n\n  if (self.source === 'camera') {\n    // audioLevelUpdated event will throw an exception for screen publisher,\n    // if the screen being published is not a chrome tab with \"share audio\" selected\n    // @TODO: Need to add checks for this scenario here\n    publisher.on('audioLevelUpdated', audioLevelUpdatedHandler);\n\n    publisher.on('accessAllowed', () => {\n      self.emit('accessAllowed');\n    });\n\n    publisher.on('accessDenied', () => {\n      self.emit('accessDenied');\n    });\n\n    publisher.on('accessDialogOpened', () => {\n      self.emit('accessDialogOpened');\n    });\n\n    publisher.on('accessDialogClosed', reason => {\n      self.emit('accessDialogClosed', reason);\n    });\n  }\n};\n\nconst _initPublisherForCamera = (\n  targetElement: HTMLElement | string | undefined,\n  options: OT.PublisherProperties | undefined,\n  publisher: Publisher\n): Promise<OT.Publisher> =>\n  new Promise((resolve, reject) => {\n    const _otPublisher = OT.initPublisher(\n      targetElement,\n      {\n        ...options,\n        insertMode: 'append',\n        style: {\n          buttonDisplayMode: 'off',\n          nameDisplayMode: 'off',\n          backgroundImageURI:\n            options?.style?.backgroundImageURI || iconSmileyFace,\n        },\n      },\n      error => {\n        if (error) {\n          reject(error);\n        } else {\n          resolve(_otPublisher);\n        }\n      }\n    );\n    // We must attach events here. Doing so in callback or after resolving is too late\n    if (_otPublisher) {\n      publisher.otPublisher = _otPublisher;\n      _attachEventsToOTPublisher(publisher, _otPublisher);\n    }\n  });\n\nconst _initPublisherForScreen = (\n  targetElement: HTMLElement | string | undefined,\n  options: OT.PublisherProperties | undefined,\n  publisher: Publisher\n): Promise<OT.Publisher> =>\n  new Promise((resolve, reject) => {\n    OT.checkScreenSharingCapability(response => {\n      if (!response.supported || response.extensionRegistered === false) {\n        reject('Screen sharing not supported for this browser');\n      } else {\n        const _otPublisher = OT.initPublisher(\n          targetElement,\n          {\n            videoSource: 'screen',\n            insertMode: 'append',\n            showControls: false,\n            videoContentHint: 'detail',\n            ...options,\n          },\n          error => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve(_otPublisher);\n            }\n          }\n        );\n        // We must attach events here. Doing so in callback or after resolving is too late\n        _attachEventsToOTPublisher(publisher, _otPublisher);\n      }\n    });\n  });\n\ndeclare interface Publisher {\n  on(event: 'audioLevelUpdated', listener: (audioLevel: number) => void): this;\n  on(event: 'videoElementCreated', listener: () => void): this;\n  on(event: 'destroyed', listener: () => void): this;\n  on(event: 'accessAllowed', listener: () => void): this;\n  on(event: 'accessDenied', listener: () => void): this;\n  on(event: 'accessDialogOpened', listener: () => void): this;\n  on(event: 'accessDialogClosed', listener: (reason: string) => void): this;\n}\n\nclass Publisher extends EventEmitter {\n  otPublisher?: OT.Publisher;\n  source: string;\n  name?: string;\n  _otPublisherPromise?: Promise<OT.Publisher>;\n  overlay: VideoOverlay | undefined;\n\n  constructor(source: string = 'camera', name?: string) {\n    super();\n    this.source = source;\n    this.name = name;\n  }\n\n  initOTPublisher = async (\n    targetElement?: HTMLElement | string,\n    publisherOptions?: OT.PublisherProperties\n  ): Promise<OT.Publisher> => {\n    if (!this._otPublisherPromise) {\n      let initPublisher = _initPublisherForCamera;\n      if (this.source === 'screen') {\n        initPublisher = _initPublisherForScreen;\n      }\n      this._otPublisherPromise = initPublisher(\n        targetElement,\n        publisherOptions,\n        this\n      );\n      let otPublisher: OT.Publisher;\n      try {\n        otPublisher = await this._otPublisherPromise;\n      } catch (e) {\n        this._otPublisherPromise = undefined;\n        throw e;\n      }\n      this.otPublisher = otPublisher;\n    }\n    return await this._otPublisherPromise;\n  };\n\n  getOTPublisher = (): Promise<OT.Publisher> | undefined =>\n    this._otPublisherPromise;\n\n  onDestroyed = () => {\n    logger.debug('Publisher destroyed');\n    this._otPublisherPromise = undefined;\n    this.emit('destroyed');\n  };\n\n  _onVideoElementCreated = () => {\n    if (this.source === 'camera') {\n      const divId = this.otPublisher?.id;\n      if (divId) {\n        this.overlay = createPublisherOverlay({\n          id: divId,\n          isAudioEnabled: this.isAudioEnabled(),\n          participantName: this.name,\n        });\n        this.overlay?.on('toggleAudioClicked', () => {\n          this._toggleAudioEnabled();\n        });\n      } else {\n        logger.warn(\n          'Could not find stream id when trying to create camera publisher overlay'\n        );\n      }\n    }\n    this.emit('videoElementCreated');\n  };\n\n  _toggleAudioEnabled = () => {\n    if (this.isAudioEnabled()) {\n      this.disableAudio();\n    } else {\n      this.enableAudio();\n    }\n  };\n  isVideoEnabled = (): boolean => !!this.otPublisher?.getVideoSource()?.track;\n\n  isAudioEnabled = (): boolean => !!this.otPublisher?.getAudioSource()?.enabled;\n\n  enableVideo = (): void => this.otPublisher?.publishVideo(true);\n\n  disableVideo = (): void => this.otPublisher?.publishVideo(false);\n\n  enableAudio = (): void => {\n    this.otPublisher?.publishAudio(true);\n    this.overlay?.setAudioEnabled();\n  };\n\n  disableAudio = (): void => {\n    this.otPublisher?.publishAudio(false);\n    this.overlay?.setAudioDisabled();\n  };\n\n  getVideoDevice = (): Device => {\n    const videoDevice: Device = { deviceId: '', label: '', kind: 'videoInput' };\n    if (this.otPublisher) {\n      const { deviceId, track } = this.otPublisher.getVideoSource();\n      videoDevice.deviceId = deviceId || '';\n      videoDevice.label = track?.label || '';\n    }\n    return videoDevice;\n  };\n\n  setVideoDevice = async (videoDeviceId: string): Promise<void> =>\n    await this.otPublisher?.setVideoSource(videoDeviceId);\n\n  getAudioDevice = async (): Promise<Device> => {\n    const track = this.otPublisher?.getAudioSource();\n    const deviceId = track ? await getDeviceId(track) : '';\n    return {\n      deviceId,\n      label: track?.label || '',\n      kind: 'audioInput',\n    };\n  };\n\n  setAudioDevice = async (audioDeviceId: string): Promise<void> =>\n    await this.otPublisher?.setAudioSource(audioDeviceId);\n\n  destroyOTPublisher = (): void => this.otPublisher?.destroy();\n\n  setVideoFilter = async (videoFilter: VideoFilter): Promise<void> =>\n    await this.otPublisher?.applyVideoFilter(videoFilter);\n\n  clearVideoFilter = async (): Promise<void> =>\n    await this.otPublisher?.clearVideoFilter();\n\n  setDisabledImageURI = (imageURI: string): void => {\n    this.otPublisher?.setStyle('backgroundImageURI', imageURI);\n  };\n}\n\nexport default Publisher;\n","import OT, { Device } from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport Publisher from '../internal/publisher';\nimport { Analytics, logAction, logVariation } from '../analytics';\nimport { logger } from '../logging';\nimport { VideoFilter } from '../utils/types';\n\ndeclare interface CameraPublisher {\n  on(event: 'audioLevelUpdated', listener: (audioLevel: number) => void): this;\n  on(event: 'created', listener: (reason: string) => void): this;\n  on(event: 'destroyed', listener: () => void): this;\n  on(event: 'accessAllowed', listener: () => void): this;\n  on(event: 'accessDenied', listener: () => void): this;\n  on(event: 'accessDialogOpened', listener: () => void): this;\n  on(event: 'accessDialogClosed', listener: (reason: string) => void): this;\n}\n\nclass CameraPublisher extends EventEmitter {\n  private _defaultTargetElement: HTMLElement;\n  private _cameraPub?: OT.Publisher;\n\n  isVideoEnabled: () => boolean;\n  isAudioEnabled: () => boolean;\n  enableVideo: () => void;\n  disableVideo: () => void;\n  enableAudio: () => void;\n  disableAudio: () => void;\n  getVideoDevice: () => Device;\n  setVideoDevice: (deviceId: string) => Promise<void>;\n  getAudioDevice: () => Promise<Device>;\n  setAudioDevice: (deviceId: string) => Promise<void>;\n  destroyCameraPublisher: () => void;\n  initPublisher: (publisherOptions?: {\n    targetElement?: HTMLElement | string;\n    publisherProperties?: OT.PublisherProperties;\n  }) => Promise<void>;\n  setVideoFilter: (videoFilter: VideoFilter) => Promise<void>;\n  clearVideoFilter: () => Promise<void>;\n  publish: () => Promise<void>;\n  setDisabledImageURI: (imageURI: string) => void;\n\n  constructor(\n    session: OT.Session,\n    defaultTargetElement: HTMLElement,\n    analytics: Analytics,\n    name: string\n  ) {\n    super();\n    this._defaultTargetElement = defaultTargetElement;\n\n    const _publisher = new Publisher('camera', name);\n\n    const _attachEventsToCameraPublisher = (): void => {\n      _publisher.on('audioLevelUpdated', (audioLevel: number) => {\n        this.emit('audioLevelUpdated', audioLevel);\n      });\n\n      _publisher.on('videoElementCreated', () => this.emit('created'));\n\n      _publisher.on('destroyed', () => this.emit('destroyed'));\n\n      _publisher.on('accessAllowed', () => {\n        this.emit('accessAllowed');\n      });\n\n      _publisher.on('accessDenied', () => {\n        this.emit('accessDenied');\n      });\n\n      _publisher.on('accessDialogOpened', () => {\n        this.emit('accessDialogOpened');\n      });\n\n      _publisher.on('accessDialogClosed', (reason: string) => {\n        this.emit('accessDialogClosed', reason);\n      });\n    };\n\n    this.isVideoEnabled = (): boolean => _publisher.isVideoEnabled();\n\n    this.isAudioEnabled = (): boolean => _publisher.isAudioEnabled();\n\n    this.enableVideo = (): void => {\n      analytics.log(logAction.cameraPublisherEnableVideo, logVariation.attempt);\n      _publisher.enableVideo();\n      analytics.log(logAction.cameraPublisherEnableVideo, logVariation.success);\n    };\n\n    this.disableVideo = (): void => {\n      analytics.log(\n        logAction.cameraPublisherDisableVideo,\n        logVariation.attempt\n      );\n      _publisher.disableVideo();\n      analytics.log(\n        logAction.cameraPublisherDisableVideo,\n        logVariation.success\n      );\n    };\n\n    this.enableAudio = (): void => {\n      analytics.log(logAction.cameraPublisherEnableAudio, logVariation.attempt);\n      _publisher.enableAudio();\n      analytics.log(logAction.cameraPublisherEnableAudio, logVariation.success);\n    };\n\n    this.disableAudio = (): void => {\n      analytics.log(\n        logAction.cameraPublisherDisableAudio,\n        logVariation.attempt\n      );\n      _publisher.disableAudio();\n      analytics.log(\n        logAction.cameraPublisherDisableAudio,\n        logVariation.success\n      );\n    };\n\n    this.getVideoDevice = (): Device => {\n      analytics.log(logAction.getVideoDevice, logVariation.attempt);\n      const videoDevice = _publisher.getVideoDevice();\n      analytics.log(logAction.getVideoDevice, logVariation.success);\n      return videoDevice;\n    };\n\n    this.setVideoDevice = async (deviceId: string): Promise<void> => {\n      analytics.log(logAction.setVideoDevice, logVariation.attempt);\n      try {\n        await _publisher.setVideoDevice(deviceId);\n        analytics.log(logAction.setVideoDevice, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.setVideoDevice, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n\n    this.getAudioDevice = async (): Promise<Device> => {\n      analytics.log(logAction.getAudioDevice, logVariation.attempt);\n      const audioDevice = await _publisher.getAudioDevice();\n      analytics.log(logAction.getAudioDevice, logVariation.success);\n      return audioDevice;\n    };\n\n    this.setAudioDevice = async (deviceId: string): Promise<void> => {\n      analytics.log(logAction.setAudioDevice, logVariation.attempt);\n      try {\n        await _publisher.setAudioDevice(deviceId);\n        analytics.log(logAction.setAudioDevice, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.setAudioDevice, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n\n    this.destroyCameraPublisher = (): void => {\n      try {\n        analytics.log(logAction.destroyCameraPublisher, logVariation.attempt);\n        _publisher.destroyOTPublisher();\n        analytics.log(logAction.destroyCameraPublisher, logVariation.success);\n      } catch (err) {\n        analytics.log(logAction.destroyCameraPublisher, logVariation.failure);\n      }\n    };\n\n    this.initPublisher = async (\n      publisherOptions: {\n        targetElement?: HTMLElement | string;\n        publisherProperties?: OT.PublisherProperties;\n      } = {}\n    ): Promise<void> => {\n      const { targetElement, publisherProperties } = publisherOptions;\n      const target = targetElement ?? this._defaultTargetElement;\n\n      _attachEventsToCameraPublisher();\n\n      await _publisher.initOTPublisher(target, publisherProperties);\n    };\n\n    this.publish = async (\n      publisherOptions: {\n        targetElement?: HTMLElement | string;\n        publisherProperties?: OT.PublisherProperties;\n      } = {}\n    ): Promise<void> => {\n      analytics.log(logAction.publishCameraPublisher, logVariation.attempt, {\n        publisherOptions,\n      });\n      const otPublisher = await _publisher.getOTPublisher();\n      if (!otPublisher) {\n        throw new Error('OT Publisher not initialized');\n      }\n\n      return new Promise<void>((resolve, reject) => {\n        session.publish(otPublisher, error => {\n          if (error) {\n            logger.error('Failed to publisher', error);\n            analytics.log(\n              logAction.publishCameraPublisher,\n              logVariation.failure,\n              {\n                error,\n              }\n            );\n            reject(error);\n          } else {\n            logger.info('Published camera to session');\n            analytics.log(\n              logAction.publishCameraPublisher,\n              logVariation.success\n            );\n            resolve();\n          }\n        });\n      });\n    };\n\n    this.setVideoFilter = async (videoFilter: VideoFilter) => {\n      try {\n        analytics.log(logAction.setVideoFilter, logVariation.attempt);\n        await _publisher.setVideoFilter(videoFilter);\n        analytics.log(logAction.setVideoFilter, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.setVideoFilter, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n\n    this.clearVideoFilter = async () => {\n      analytics.log(logAction.clearVideoFilter, logVariation.attempt);\n      try {\n        await _publisher.clearVideoFilter();\n        analytics.log(logAction.clearVideoFilter, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.clearVideoFilter, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n\n    this.setDisabledImageURI = (imageURI: string): void => {\n      _publisher.setDisabledImageURI(imageURI);\n    };\n  }\n}\n\nexport default CameraPublisher;\n","import { Session } from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport Publisher from '../internal/publisher';\nimport { Analytics, logAction, logVariation } from '../analytics';\n\ndeclare interface ScreenPublisher {\n  on(event: 'audioLevelUpdated', listener: (audioLevel: number) => void): this;\n  on(event: 'started', listener: () => void): this;\n  on(event: 'stopped', listener: () => void): this;\n}\n\nconst NOT_SCREEN_SHARING_ERROR = 'Client is not screen sharing';\n\nclass ScreenPublisher extends EventEmitter {\n  private _defaultTargetElement: HTMLElement;\n  isScreenSharing: Boolean = false;\n\n  start: (targetElement?: HTMLElement | string) => Promise<void>;\n  stop: () => void;\n  isVideoEnabled: () => boolean;\n  isAudioEnabled: () => boolean;\n  enableVideo: () => void;\n  disableVideo: () => void;\n  enableAudio: () => void;\n  disableAudio: () => void;\n  setDisabledImageURI: (imageURI: string) => void;\n\n  constructor(\n    session: Session,\n    targetElement: HTMLElement,\n    analytics: Analytics\n  ) {\n    super();\n\n    this._defaultTargetElement = targetElement;\n    let _publisher = new Publisher('screen');\n\n    const _attachEventsToScreenPublisher = async (): Promise<void> => {\n      _publisher.on('audioLevelUpdated', (audioLevel: number) => {\n        this.emit('audioLevelUpdated', audioLevel);\n      });\n\n      _publisher.on('videoElementCreated', () => this.emit('started'));\n\n      _publisher.on('destroyed', () => this.emit('stopped'));\n    };\n\n    this.start = async (\n      targetElement?: HTMLElement | string\n    ): Promise<void> => {\n      if (!_publisher) {\n        _publisher = new Publisher('screen');\n      }\n\n      const target = targetElement ?? this._defaultTargetElement;\n\n      _attachEventsToScreenPublisher();\n\n      const screenPub = await _publisher.initOTPublisher(target, {\n        showControls: true,\n        style: {\n          buttonDisplayMode: 'off',\n        },\n      });\n\n      screenPub?.element?.classList.add('OT_screenshare');\n      this.isScreenSharing = true;\n      return new Promise<void>((resolve, reject) => {\n        session.publish(screenPub, error => {\n          if (error) {\n            reject(error);\n          } else {\n            resolve();\n          }\n        });\n      });\n    };\n\n    this.stop = (): void => {\n      _publisher?.destroyOTPublisher();\n      // @ts-ignore\n      _publisher = undefined;\n      this.isScreenSharing = false;\n    };\n\n    this.isVideoEnabled = (): boolean =>\n      this.isScreenSharing && _publisher?.isVideoEnabled();\n\n    this.isAudioEnabled = (): boolean =>\n      this.isScreenSharing && _publisher?.isAudioEnabled();\n\n    this.enableVideo = (): void => {\n      analytics.log(logAction.screenPublisherEnableVideo, logVariation.attempt);\n      if (this.isScreenSharing) {\n        _publisher?.enableVideo();\n        analytics.log(\n          logAction.screenPublisherEnableVideo,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenPublisherEnableVideo,\n          logVariation.failure,\n          {\n            error: NOT_SCREEN_SHARING_ERROR,\n          }\n        );\n      }\n    };\n\n    this.disableVideo = (): void => {\n      analytics.log(\n        logAction.screenPublisherDisableVideo,\n        logVariation.attempt\n      );\n      if (this.isScreenSharing) {\n        _publisher?.disableVideo();\n        analytics.log(\n          logAction.screenPublisherDisableVideo,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenPublisherDisableVideo,\n          logVariation.failure,\n          {\n            error: NOT_SCREEN_SHARING_ERROR,\n          }\n        );\n      }\n    };\n\n    this.enableAudio = (): void => {\n      analytics.log(logAction.screenPublisherEnableAudio, logVariation.attempt);\n      if (this.isScreenSharing) {\n        _publisher?.enableAudio();\n        analytics.log(\n          logAction.screenPublisherEnableAudio,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenPublisherEnableAudio,\n          logVariation.failure,\n          {\n            error: NOT_SCREEN_SHARING_ERROR,\n          }\n        );\n      }\n    };\n\n    this.disableAudio = (): void => {\n      analytics.log(\n        logAction.screenPublisherDisableAudio,\n        logVariation.attempt\n      );\n      if (this.isScreenSharing) {\n        _publisher?.disableAudio();\n        analytics.log(\n          logAction.screenPublisherDisableAudio,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenPublisherDisableAudio,\n          logVariation.failure,\n          {\n            error: NOT_SCREEN_SHARING_ERROR,\n          }\n        );\n      }\n    };\n\n    this.setDisabledImageURI = (imageURI: string): void => {\n      _publisher.setDisabledImageURI(imageURI);\n    };\n  }\n}\n\nexport default ScreenPublisher;\n","import {\n  Stream,\n  Subscriber as OTSubscriber,\n  Session,\n  OTError,\n} from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport Subscriber from '../internal/subscriber';\nimport { Analytics, logAction, logVariation } from '../analytics';\n\ndeclare interface ScreenSubscriber {\n  on(event: 'audioLevelUpdated', listener: (audioLevel: number) => void): this;\n  on(event: 'created', listener: () => void): this;\n  on(event: 'destroyed', listener: () => void): this;\n}\n\nclass ScreenSubscriber extends EventEmitter {\n  // @ts-ignore @TODO: Verify whether _stream variable required for this class?\n  private _stream: Stream;\n\n  id: string;\n  getSubscriberElement: () => HTMLElement | undefined;\n  isVideoEnabled: () => boolean;\n  isAudioEnabled: () => boolean;\n  enableVideo: () => void;\n  disableVideo: () => void;\n  enableAudio: () => void;\n  disableAudio: () => void;\n  setDisabledImageURI: (imageURI: string) => void;\n\n  constructor(\n    stream: Stream,\n    otSubscriber: OTSubscriber,\n    analytics: Analytics\n  ) {\n    super();\n    this._stream = stream;\n    const _subscriber = new Subscriber(otSubscriber);\n    otSubscriber.element?.classList.add('MP_screenshare_subscriber');\n\n    _subscriber.on('audioLevelUpdated', (audioLevel: number) => {\n      this.emit('audioLevelUpdated', audioLevel);\n    });\n\n    _subscriber.on('destroyed', () => this.emit('destroyed'));\n\n    _subscriber.on('videoElementCreated', () => {\n      this.emit('created');\n    });\n\n    this.id = _subscriber.id as string;\n\n    this.getSubscriberElement = () => _subscriber?.getSubscriberElement();\n\n    this.isVideoEnabled = () => _subscriber?.isVideoEnabled();\n\n    this.isAudioEnabled = () => _subscriber?.isAudioEnabled();\n\n    this.enableVideo = (): void => {\n      analytics.log(\n        logAction.screenSubscriberEnableVideo,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.enableVideo();\n        analytics.log(\n          logAction.screenSubscriberEnableVideo,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenSubscriberEnableVideo,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.disableVideo = (): void => {\n      analytics.log(\n        logAction.screenSubscriberDisableVideo,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.disableVideo();\n        analytics.log(\n          logAction.screenSubscriberDisableVideo,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenSubscriberDisableVideo,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.enableAudio = (): void => {\n      analytics.log(\n        logAction.screenSubscriberEnableAudio,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.enableAudio();\n        analytics.log(\n          logAction.screenSubscriberEnableAudio,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenSubscriberEnableAudio,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.disableAudio = (): void => {\n      analytics.log(\n        logAction.screenSubscriberDisableAudio,\n        logVariation.attempt\n      );\n      if (_subscriber) {\n        _subscriber.disableAudio();\n        analytics.log(\n          logAction.screenSubscriberDisableAudio,\n          logVariation.success\n        );\n      } else {\n        analytics.log(\n          logAction.screenSubscriberDisableAudio,\n          logVariation.failure\n        );\n      }\n    };\n\n    this.setDisabledImageURI = (imageURI: string): void => {\n      _subscriber.setDisabledImageURI(imageURI);\n    };\n  }\n}\n\nexport default ScreenSubscriber;\n\n/* We can't use a promise here because the videoElementCreated event may be fired between\n * calling resolve() and the success handler being executed. Instead we use a synchronous callback.\n */\nexport const createScreenSubscriber = (\n  session: Session,\n  stream: Stream,\n  analytics: Analytics,\n  callback: (error?: OTError, subscriber?: ScreenSubscriber) => void\n): void => {\n  analytics.log(logAction.createScreenSubscriber, logVariation.attempt);\n  const _otSubscriber = session.subscribe(\n    stream,\n    'layoutContainer',\n    {\n      insertMode: 'append',\n      style: {\n        buttonDisplayMode: 'off',\n        nameDisplayMode: 'off',\n        videoDisabledDisplayMode: 'off',\n      },\n    },\n    error => {\n      if (error) {\n        analytics.log(logAction.createScreenSubscriber, logVariation.failure);\n        callback(error);\n      } else {\n        const screenSubscriber = new ScreenSubscriber(\n          stream,\n          _otSubscriber,\n          analytics\n        );\n        analytics.log(logAction.createScreenSubscriber, logVariation.success);\n        callback(undefined, screenSubscriber);\n      }\n    }\n  );\n};\n","/**\n * This Speaker Detection algorithm is based on https://tokbox.com/developer/guides/customize-ui/js/#active_speaker\n * Some values had to be modified for better detection of the speaker as well as once they stop speaking\n */\n\nimport { EventEmitter } from 'events';\n\nconst SPEAKER_DETECTED_FIRST_TIME_INTERVAL = 100; // this is milliseconds\nconst LOW_AUDIO_DETECTED_INTERVAL = 100; // this is milliseconds\nconst MIN_AUDIO_LEVEL = 0;\n\ntype SpeakerChangeDetected = {\n  isSpeaking: boolean;\n};\n\ntype Activity = {\n  timestamp: number;\n  talking: boolean;\n};\n\ndeclare interface SpeakerDetection {\n  emit(\n    event: 'activeSpeakerStatusChanged',\n    payload: SpeakerChangeDetected\n  ): boolean;\n  on(\n    event: 'activeSpeakerStatusChanged',\n    listener: (payload: SpeakerChangeDetected) => void\n  ): this;\n}\n\nclass SpeakerDetection extends EventEmitter {\n  activity = {} as Activity;\n  onAudioLevelUpdated(audioLevel: number) {\n    const now = Date.now();\n    const isTalking = audioLevel > MIN_AUDIO_LEVEL;\n\n    if (isTalking) {\n      //checking below if the activity object has been initialized\n      if (Object.keys(this.activity).length === 0) {\n        // this is the first time we are hearing the person talk\n        // initializing the initial variable\n        this.activity = { timestamp: now, talking: false };\n      } else if (this.activity.talking) {\n        // the person is currently talking\n        this.activity.timestamp = now;\n      } else if (\n        now - this.activity.timestamp >\n        SPEAKER_DETECTED_FIRST_TIME_INTERVAL\n      ) {\n        // This part filters out random short noise\n        // The person is currently speaking if they have been speaking for awhile\n        this.activity.talking = true;\n        this.emit('activeSpeakerStatusChanged', {\n          isSpeaking: true,\n        });\n      }\n    } else if (\n      Object.keys(this.activity).length !== 0 &&\n      now - this.activity.timestamp > LOW_AUDIO_DETECTED_INTERVAL\n    ) {\n      // The person may have stopped talking but we give them a period of time before dispatching the event to remove CSS for this active speaker\n      // (this takes into account pauses when one speaks)\n      if (this.activity.talking) {\n        this.emit('activeSpeakerStatusChanged', {\n          isSpeaking: false,\n        });\n        // if the active speaker changes externally, the activity tracker gets reset\n        this.reset();\n      }\n    }\n  }\n\n  reset() {\n    this.activity = {} as Activity;\n  }\n}\n\nexport default SpeakerDetection;\n","import { EventEmitter } from 'events';\nimport { throttle } from 'lodash';\nimport Participant from '../internal/participant';\nimport SpeakerDetection from './speaker-detection';\n\ntype SubscriberAudioLevels = Record<string, number>;\n\nexport type ActiveSpeakerInfo = {\n  subscriberId: string | undefined;\n  movingAvg: number;\n  participant: Participant | undefined;\n};\n\ntype ParticipantBySubscriberId = {\n  [key: string]: Participant;\n};\ntype ActiveSpeakerChangedPayload = {\n  previousActiveSpeaker: ActiveSpeakerInfo;\n  newActiveSpeaker: ActiveSpeakerInfo;\n};\ntype SpeakerChangeDetected = {\n  isSpeaking: boolean;\n};\ndeclare interface ActiveSpeakerTracker {\n  emit(\n    event: 'activeSpeakerStatusChanged',\n    payload: SpeakerChangeDetected\n  ): boolean;\n  on(\n    event: 'activeSpeakerStatusChanged',\n    listener: (payload: SpeakerChangeDetected) => void\n  ): this;\n  emit(\n    event: 'activeSpeakerChanged',\n    payload: ActiveSpeakerChangedPayload\n  ): boolean;\n  on(\n    event: 'activeSpeakerChanged',\n    listener: (payload: ActiveSpeakerChangedPayload) => void\n  ): this;\n}\n\nconst CALCULATE_ACTIVE_SPEAKER_THROTTLE_TIME = 1500;\nclass ActiveSpeakerTracker extends EventEmitter {\n  _subscriberAudioLevelsBySubscriberId: SubscriberAudioLevels = {};\n  _participantsBySubscriberId: ParticipantBySubscriberId = {};\n  activeSpeaker: ActiveSpeakerInfo;\n  speakerDetection: SpeakerDetection;\n  calculateActiveSpeaker: () => void;\n\n  constructor() {\n    super();\n    this.activeSpeaker = {\n      movingAvg: 0,\n      subscriberId: undefined,\n      participant: undefined,\n    };\n\n    this.speakerDetection = new SpeakerDetection();\n\n    this.speakerDetection.on('activeSpeakerStatusChanged', payload => {\n      this.emit('activeSpeakerStatusChanged', payload);\n    });\n\n    this.calculateActiveSpeaker = throttle(\n      this._calculateActiveSpeaker,\n      CALCULATE_ACTIVE_SPEAKER_THROTTLE_TIME,\n      {\n        // So we don't send events after subscriber is destroyed\n        leading: true,\n        trailing: false,\n      }\n    );\n  }\n  onCameraSubscriberDestroyed = (subscriberId: string) => {\n    delete this._subscriberAudioLevelsBySubscriberId[subscriberId];\n    delete this._participantsBySubscriberId[subscriberId];\n    if (this.activeSpeaker.subscriberId === subscriberId) {\n      this.activeSpeaker = {\n        subscriberId: undefined,\n        movingAvg: 0,\n        participant: undefined,\n      };\n    }\n    this.calculateActiveSpeaker();\n  };\n\n  onSubscriberAudioLevelUpdated = ({\n    subscriberId,\n    movingAvg,\n    participant,\n    audioLevel,\n  }: {\n    subscriberId: string;\n    movingAvg: number;\n    participant: Participant;\n    audioLevel: number;\n  }) => {\n    this._subscriberAudioLevelsBySubscriberId[subscriberId] = movingAvg;\n    this._participantsBySubscriberId[subscriberId] = participant;\n    this.calculateActiveSpeaker();\n\n    if (subscriberId === this.activeSpeaker.subscriberId) {\n      this.speakerDetection.onAudioLevelUpdated(audioLevel);\n    }\n  };\n\n  _calculateActiveSpeaker = () => {\n    const subscriberIdAudioLevelKeyValuePair = Object.entries(\n      this._subscriberAudioLevelsBySubscriberId\n    );\n    const activeSpeaker = subscriberIdAudioLevelKeyValuePair.reduce<\n      ActiveSpeakerInfo\n    >(\n      (acc, [subscriberId, movingAvg]) => {\n        if (movingAvg > acc.movingAvg) {\n          return {\n            subscriberId,\n            movingAvg,\n            participant: this._participantsBySubscriberId[subscriberId],\n          };\n        }\n        return acc;\n      },\n      {\n        subscriberId: undefined,\n        movingAvg: 0,\n        participant: undefined,\n      }\n    );\n\n    if (\n      activeSpeaker.subscriberId !== this.activeSpeaker.subscriberId &&\n      activeSpeaker.movingAvg > 0.2\n    ) {\n      const previousActiveSpeaker = { ...this.activeSpeaker };\n      this.activeSpeaker = activeSpeaker;\n      this.emit('activeSpeakerChanged', {\n        newActiveSpeaker: activeSpeaker,\n        previousActiveSpeaker,\n      });\n      this.speakerDetection.reset();\n    }\n  };\n}\n\nexport default ActiveSpeakerTracker;\n","import { Connection } from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport CameraSubscriber from '../mp/camera-subscriber';\nimport ScreenSubscriber from '../mp/screen-subscriber';\n\ndeclare interface Participant {\n  on(\n    event: 'cameraCreated',\n    listener: (cameraSubscriber: CameraSubscriber) => void\n  ): this;\n  on(\n    event: 'screenCreated',\n    listener: (cameraSubscriber: ScreenSubscriber) => void\n  ): this;\n  on(event: 'cameraDestroyed', listener: () => void): this;\n  on(event: 'screenDestroyed', listener: () => void): this;\n}\nclass Participant extends EventEmitter {\n  id: string;\n  connection: Connection;\n  camera?: CameraSubscriber;\n  screen?: ScreenSubscriber;\n  name: string | null = null;\n  isParticipantJoinedSent: boolean = false;\n  connectionData: string;\n  isMe: false = false;\n\n  constructor(connection: Connection) {\n    super();\n    this.connection = connection;\n    const { connectionId, data } = connection;\n    this.id = connectionId;\n    this.connectionData = data;\n  }\n\n  setCameraSubscriber(cameraSubscriber: CameraSubscriber) {\n    this.camera = cameraSubscriber;\n    cameraSubscriber.on('created', () => {\n      this.emit('cameraCreated', cameraSubscriber);\n    });\n    cameraSubscriber.on('destroyed', () => {\n      this.emit('cameraDestroyed');\n    });\n  }\n\n  setScreenSubscriber(screenSubscriber: ScreenSubscriber) {\n    this.screen = screenSubscriber;\n    screenSubscriber.on('created', () => {\n      this.emit('screenCreated');\n    });\n    screenSubscriber.on('destroyed', () => {\n      this.emit('screenDestroyed');\n    });\n  }\n}\n\nexport default Participant;\n","import { EventEmitter } from 'events';\nimport Participant from '../internal/participant';\nimport CameraSubscriber from '../mp/camera-subscriber';\nimport ScreenSubscriber from '../mp/screen-subscriber';\n\ndeclare interface ParticipantWrapper {\n  on(\n    event: 'cameraCreated',\n    listener: (cameraSubscriber: CameraSubscriber) => void\n  ): this;\n  on(\n    event: 'screenCreated',\n    listener: (cameraSubscriber: ScreenSubscriber) => void\n  ): this;\n  on(event: 'cameraDestroyed', listener: () => void): this;\n  on(event: 'screenDestroyed', listener: () => void): this;\n}\n\nclass ParticipantWrapper extends EventEmitter {\n  id: string;\n  camera?: CameraSubscriber;\n  screen?: ScreenSubscriber;\n  name?: string;\n  connectionData: string;\n  isMe: false = false;\n\n  constructor(participant: Participant) {\n    super();\n    this.id = participant.id;\n    this.connectionData = participant.connectionData;\n\n    /*\n     * Here we use defineProperty to set a getting because participant.screen\n     * and participant.camera are initially undefined and setting e.g.:\n     * this.camera = participant.camera would not work when the object reference changes.\n     */\n    Object.defineProperty(this, 'camera', { get: () => participant.camera });\n    Object.defineProperty(this, 'screen', { get: () => participant.screen });\n    Object.defineProperty(this, 'name', {\n      get: () => participant.name,\n    });\n\n    participant.on('cameraCreated', cameraSubscriber => {\n      this.emit('cameraCreated', cameraSubscriber);\n    });\n\n    participant.on('cameraDestroyed', () => {\n      this.emit('cameraDestroyed');\n    });\n\n    participant.on('screenCreated', screenSubscriber => {\n      this.emit('screenCreated', screenSubscriber);\n    });\n\n    participant.on('screenDestroyed', () => {\n      this.emit('screenDestroyed');\n    });\n  }\n}\n\nexport default ParticipantWrapper;\n","export const removeUndefinedProperties = (\n  properties: Record<string, any>\n): Record<string, string> => {\n  return Object.entries(properties).reduce((acc, [propName, value]) => {\n    if (value !== undefined) {\n      acc[propName] = value;\n    }\n    return acc;\n  }, {} as Record<string, any>);\n};\n\nexport const deleteAllEntries = (object: Record<string, any>) => {\n  Object.keys(object).forEach(key => {\n    delete object[key];\n  });\n};\n","import UAParser from 'ua-parser-js';\n\n/* Using a permissive value here to include large phones and any future large phones while excluding tablets\nSee common device sizes here: https://experienceleague.adobe.com/docs/target/using/experiences/vec/mobile-viewports.html?lang=en\nE.g. Samsung Galaxy Note 5\t480. iPhone 12 Pro Max: 428.\nNote this is to be used with max-device-width query which uses CSS pixel width which takes into account pixel density.\n*/\nconst MAX_MOBILE_WIDTH = 500;\n\nconst uaParser = new UAParser(navigator.userAgent);\nconst uaDevice = uaParser.getDevice();\n\nconst hasTouchScreen = (): boolean => {\n  if ('maxTouchPoints' in navigator) {\n    return navigator.maxTouchPoints > 0;\n  }\n  const query = window.matchMedia('(pointer:coarse)');\n  return query.matches;\n};\n\nconst hasMobileScreenWidth = (): boolean => {\n  const query = window.matchMedia(`(max-device-width: ${MAX_MOBILE_WIDTH}px)`);\n  return query.matches;\n};\n\n/* Determine whether device is a mobile.\n *  - First try to determine via user agent detection\n *  - If that fails then check for touchscreen and a mobile size screen\n */\nexport const isMobile = (): boolean => {\n  if (uaDevice.type) {\n    return uaDevice.type === 'mobile';\n  }\n  return hasMobileScreenWidth() && hasTouchScreen();\n};\n","export type ExternalPromiseResolver = {\n  promise: Promise<unknown>;\n  resolver: () => void;\n  rejector: () => void;\n};\n\nexport const createExternalPromiseResolver = (): ExternalPromiseResolver => {\n  let resolver, rejector;\n  const promise = new Promise((resolve, reject) => {\n    resolver = resolve;\n    rejector = reject;\n  });\n  // We must catch the promise otherwise jest will fail\n  promise.catch(() => {});\n  return {\n    promise,\n    // @ts-ignore\n    resolver,\n    // @ts-ignore\n    rejector,\n  };\n};\n","import { Connection } from '@opentok/client';\nimport { EventEmitter } from 'events';\n\nclass LocalParticipant extends EventEmitter {\n  id: string;\n  name?: string;\n  connectionData: string;\n  isMe: true = true;\n\n  constructor(connection: Connection, name?: string) {\n    super();\n    this.id = connection.connectionId;\n    this.name = name;\n    this.connectionData = connection.data;\n  }\n}\n\nexport default LocalParticipant;\n","import { EventEmitter } from 'events';\nimport LocalParticipant from '../internal/local-participant';\n\nclass LocalParticipantWrapper extends EventEmitter {\n  id: string;\n  name?: string;\n  connectionData: string;\n  isMe: true = true;\n\n  constructor(localParticipant: LocalParticipant) {\n    super();\n    this.id = localParticipant.id;\n    this.connectionData = localParticipant.connectionData;\n    this.name = localParticipant.name;\n  }\n}\n\nexport default LocalParticipantWrapper;\n","import OT, { Connection } from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport LayoutManager, { LayoutOptions } from '../mp/layout-manager';\nimport CameraPublisher from '../mp/camera-publisher';\nimport CameraSubscriber, {\n  createCameraSubscriber,\n} from '../mp/camera-subscriber';\nimport ScreenPublisher from '../mp/screen-publisher';\nimport ScreenSubscriber, {\n  createScreenSubscriber,\n} from '../mp/screen-subscriber';\nimport ActiveSpeakerTracker, {\n  ActiveSpeakerInfo,\n} from '../mp/active-speaker-tracker';\nimport { getTargetElementFromDOM, createDiv } from '../utils/dom';\nimport Participant from './participant';\nimport ParticipantWrapper from '../mp/participant';\nimport { RoomProperties, LayoutMode, IceConfig } from '../utils/types';\nimport { Analytics, logAction, logVariation } from '../analytics';\nimport { deleteAllEntries, removeUndefinedProperties } from '../utils/object';\nimport { SignalOptions, SignalEvent } from '../types/signaling';\nimport { logger } from '../logging';\nimport { isMobile } from '../utils/is-mobile';\nimport {\n  createExternalPromiseResolver,\n  ExternalPromiseResolver,\n} from '../utils/promise';\nimport LocalParticipant from './local-participant';\nimport LocalParticipantWrapper from '../mp/local-participant';\n\nconst PARTICIPANT_NAME_RECEIVED_TIMEOUT = 300;\n\ndeclare interface Room {\n  on(event: 'connected', listener: () => void): this; // session connected event\n  on(event: 'disconnected', listener: (reason: string) => void): this; // session disconnected event\n  on(event: 'reconnecting', listener: () => void): this; // session reconnecting event\n  on(event: 'reconnected', listener: () => void): this; // session reconnected event\n  on(event: 'cameraPublisherMediaDisabled', listener: () => void): this;\n  on(\n    event: 'cameraSubscriberVideoDisabled',\n    listener: (id: string) => void\n  ): this;\n  on(\n    event: 'participantJoined',\n    listener: (participant: ParticipantWrapper) => void\n  ): this;\n  on(\n    event: 'participantLeft',\n    listener: (participant: ParticipantWrapper, reason: string) => void\n  ): this;\n  on(\n    event: 'activeSpeakerChanged',\n    listener: (participant: ParticipantWrapper) => void\n  ): this;\n  on(event: 'signal', listener: (event: SignalEvent) => void): this;\n}\n\ntype CameraSubscriberById = Record<string, CameraSubscriber>;\ntype ScreenSubscriberById = Record<string, ScreenSubscriber>;\n\nclass Room extends EventEmitter {\n  apiKey: string;\n  roomId: string;\n  token: string;\n  iceConfig?: IceConfig;\n  roomContainer: HTMLElement | string;\n  managedLayoutOptions?: LayoutOptions;\n  mediaShutoffThreshold?: number;\n  maxVideoParticipantsOnScreen?: number;\n  useMobileLayout: boolean;\n  participants: Record<string, Participant | LocalParticipant> = {};\n  participantWrappers: Record<\n    string,\n    ParticipantWrapper | LocalParticipantWrapper\n  > = {};\n  camera: CameraPublisher;\n  screen: ScreenPublisher;\n  participantName: string;\n\n  private _waitUntilJoined: ExternalPromiseResolver;\n  private _analytics: Analytics;\n  private _session: OT.Session;\n  private _layoutManager: LayoutManager;\n  private _activeSpeakerTracker: ActiveSpeakerTracker;\n\n  private _cameraSubscribers: CameraSubscriberById = {};\n  private _screenSubscribers: ScreenSubscriberById = {};\n  private _visibleParticipantsCount: number = 0;\n\n  constructor(roomProperties: RoomProperties) {\n    super();\n    logger.debug('Initializing room with properties', roomProperties);\n    const {\n      apiKey,\n      sessionId,\n      token,\n      roomContainer,\n      mediaShutoffThreshold,\n      maxVideoParticipantsOnScreen,\n      managedLayoutOptions = {},\n      participantName = '',\n      iceConfig,\n    } = roomProperties;\n\n    this._analytics = new Analytics({ sessionId, apiKey });\n    this._analytics.log(logAction.initRoom, logVariation.attempt, {\n      roomProperties,\n    });\n\n    if (!apiKey || !sessionId || !token) {\n      const error =\n        'Invalid credentials. Check the API_KEY, TOKEN, SESSION_ID passed';\n      this._analytics.log(logAction.initRoom, logVariation.failure, { error });\n      logger.error(error);\n      throw new Error(error);\n    }\n\n    this.apiKey = apiKey;\n    this.roomId = sessionId;\n    this.token = token;\n    this.iceConfig = iceConfig;\n    this.roomContainer = roomContainer || this._createDefaultRoomContainer();\n    this.mediaShutoffThreshold = mediaShutoffThreshold;\n\n    this._waitUntilJoined = createExternalPromiseResolver();\n\n    if (\n      (maxVideoParticipantsOnScreen !== undefined &&\n        typeof maxVideoParticipantsOnScreen !== 'number') ||\n      (typeof maxVideoParticipantsOnScreen === 'number' &&\n        maxVideoParticipantsOnScreen < 0)\n    ) {\n      logger.warn(\n        'Warning: maxVideoParticipantsOnScreen must be a number greater than or equal to 0. Received: ',\n        maxVideoParticipantsOnScreen\n      );\n    } else {\n      this.maxVideoParticipantsOnScreen = maxVideoParticipantsOnScreen;\n    }\n\n    this.participantName = participantName;\n\n    const {\n      deviceLayoutMode = 'auto',\n      ...layoutOptions\n    } = managedLayoutOptions;\n    this.useMobileLayout =\n      deviceLayoutMode === 'mobile' ||\n      (deviceLayoutMode === 'auto' && isMobile());\n\n    logger.debug('Initializing room with layout manager');\n    this.managedLayoutOptions = {\n      layoutMode: 'grid',\n      isMobileLayout: this.useMobileLayout,\n      ...layoutOptions,\n    };\n\n    this._session = OT.initSession(this.apiKey, this.roomId, {\n      iceConfig: this.iceConfig,\n    });\n\n    this._layoutManager = new LayoutManager(\n      this.roomContainer,\n      this.managedLayoutOptions,\n      maxVideoParticipantsOnScreen\n    );\n    this._layoutManager.on('layoutComplete', () => {\n      this._setOptimalSubscriberResolutions();\n    });\n    this._layoutManager.on(\n      'cameraSubscriberHidden',\n      this._onCameraSubscriberHiddenByLayoutManager\n    );\n    this._layoutManager.on(\n      'cameraSubscriberDisplayed',\n      this._onCameraSubscriberDisplayedByLayoutManager\n    );\n\n    this.camera = new CameraPublisher(\n      this._session,\n      this._getDefaultPublisherElement(),\n      this._analytics,\n      this.participantName\n    );\n\n    this.screen = new ScreenPublisher(\n      this._session,\n      this._getDefaultPublisherElement('screen'),\n      this._analytics\n    );\n\n    this._activeSpeakerTracker = new ActiveSpeakerTracker();\n\n    this._activeSpeakerTracker.on(\n      'activeSpeakerChanged',\n      this._onActiveSpeakerChanged\n    );\n\n    this._activeSpeakerTracker.on(\n      'activeSpeakerStatusChanged',\n      this._onActiveSpeakerStatusChanged\n    );\n\n    this._analytics.log(logAction.initRoom, logVariation.success);\n  }\n\n  _attachOTSessionEventListeners = () => {\n    this._session.on('sessionConnected', () => {\n      logger.debug('Connected to session');\n      this.emit('connected');\n    });\n\n    this._session.on('sessionDisconnected', event => {\n      const { reason } = event;\n      logger.debug(`SessionDisconnect, reason: ${reason}`);\n      if (this.camera) {\n        this.camera.destroyCameraPublisher();\n      }\n\n      if (this.screen) {\n        this.screen.stop();\n      }\n\n      this.emit('disconnected', reason);\n    });\n\n    this._session.on('sessionReconnecting', () => {\n      logger.debug('Session Reconnecting');\n      this.emit('reconnecting');\n    });\n\n    this._session.on('sessionReconnected', () => {\n      logger.debug('Session Reconnected');\n      this.emit('reconnected');\n    });\n\n    this._session.on('streamCreated', async event => {\n      // Wait until we have joined call before subscribing\n      try {\n        await this._waitUntilJoined.promise;\n      } catch (e) {\n        // Join failed, disregard stream\n        return;\n      }\n\n      const { stream } = event;\n      const {\n        connection: { connectionId },\n      } = stream;\n\n      const participant = this.participants[connectionId];\n\n      if (participant && !participant.isMe) {\n        logger.debug(`Stream created for participant: ${connectionId}`);\n        this._onParticipantStreamCreated(\n          this._session,\n          stream,\n          participant,\n          this._shouldEnableParticipantVideo()\n        );\n      } else {\n        logger.info(\n          `No participant found for new stream with connection id ${connectionId}`\n        );\n      }\n    });\n\n    this._session.on('streamDestroyed', event => {\n      const { stream } = event;\n      const {\n        connection: { connectionId },\n      } = stream;\n\n      const participant = this.participants[connectionId];\n\n      if (participant) {\n        logger.debug(`Stream destroyed for participant: ${connectionId}`);\n        this._onParticipantStreamDestroyed();\n      }\n\n      if (!this.useMobileLayout && this._shouldEnableParticipantVideo()) {\n        logger.info('Subscribing to all participants video');\n        Object.values(this.participants).forEach(participant => {\n          if (!participant.isMe) {\n            participant.camera?.enableVideo();\n          }\n        });\n      }\n    });\n\n    this._session.on('connectionCreated', async event => {\n      const { connection } = event;\n      const { participant, participantWrapper } = this._createParticipant(\n        connection\n      );\n      if (!this._isMe(connection)) {\n        try {\n          await this._sendParticipantName(connection);\n        } catch (error) {\n          logger.warn(\n            'Attempted to send the participant name to a participant that is already disconnected.'\n          );\n        }\n\n        setTimeout(() => {\n          // Check if the participant is still connected.\n          if (!this.participants[participant.id]) {\n            return;\n          }\n\n          if (this.participants[participant.id].name === null) {\n            logger.info(\n              'Timeout waiting for participant name, using empty name.'\n            );\n            this._onParticipantNameReceived(participantWrapper, '');\n          }\n        }, PARTICIPANT_NAME_RECEIVED_TIMEOUT);\n      }\n    });\n\n    this._session.on('connectionDestroyed', event => {\n      const { connection, reason } = event;\n      const participantId = connection.connectionId;\n      const participant = this.participants[participantId];\n      if (participant && !participant.isMe) {\n        const { isParticipantJoinedSent } = participant;\n        const participantWrapper = this.participantWrappers[participantId];\n        delete this.participantWrappers[participantId];\n        delete this.participants[participantId];\n        if (isParticipantJoinedSent) {\n          logger.info(`Participant left: ${participantWrapper}`);\n          this.emit('participantLeft', participantWrapper, reason);\n        }\n      }\n    });\n\n    this._session.on('signal', this._onSignalReceived);\n  };\n\n  _createParticipant = (\n    connection: Connection\n  ): {\n    participant: Participant | LocalParticipant;\n    participantWrapper: ParticipantWrapper | LocalParticipantWrapper;\n  } => {\n    let participant, participantWrapper;\n    if (this._isMe(connection)) {\n      ({ participant, participantWrapper } = this._createLocalParticipant(\n        connection,\n        this.participantName\n      ));\n    } else {\n      ({ participant, participantWrapper } = this._createRemoteParticipant(\n        connection\n      ));\n    }\n    this.participants[participant.id] = participant;\n    this.participantWrappers[participant.id] = participantWrapper;\n    return {\n      participant,\n      participantWrapper,\n    };\n  };\n\n  _createLocalParticipant = (\n    connection: Connection,\n    name?: string\n  ): {\n    participant: LocalParticipant;\n    participantWrapper: LocalParticipantWrapper;\n  } => {\n    const participant = new LocalParticipant(connection, name);\n    const participantWrapper = new LocalParticipantWrapper(participant);\n\n    return {\n      participant,\n      participantWrapper,\n    };\n  };\n\n  _createRemoteParticipant = (\n    connection: Connection\n  ): {\n    participant: Participant;\n    participantWrapper: ParticipantWrapper;\n  } => {\n    const participant = new Participant(connection);\n    const participantWrapper = new ParticipantWrapper(participant);\n\n    return {\n      participant,\n      participantWrapper,\n    };\n  };\n\n  _removeOTSessionEventListeners = () => {\n    this._session.off();\n  };\n\n  _createDefaultRoomContainer = () => {\n    const element = createDiv('roomContainer', {\n      width: '100vw',\n      height: '100vh',\n      position: 'relative',\n    });\n    document.body.appendChild(element);\n    return element;\n  };\n\n  _getDefaultPublisherElement = (\n    type: 'camera' | 'screen' = 'camera'\n  ): HTMLElement => {\n    const {\n      managedLayoutOptions: {\n        screenPublisherContainer,\n        cameraPublisherContainer,\n      } = {},\n    } = this;\n    const customContainer =\n      type === 'camera' ? cameraPublisherContainer : screenPublisherContainer;\n    if (customContainer) {\n      return getTargetElementFromDOM(customContainer);\n    }\n    // default target is layout managed div\n    return this._layoutManager.getLayoutContainerElement();\n  };\n\n  _connect = (): Promise<void> => {\n    return new Promise((resolve, reject) => {\n      this._session.connect(this.token, error => {\n        if (error) {\n          reject(error);\n        } else {\n          this._analytics.update(\n            this._session.sessionId,\n            this._session.connection!.connectionId,\n            this.apiKey\n          );\n          logger.info('Session connected');\n          resolve();\n        }\n      });\n    });\n  };\n\n  _isMe = (connection: OT.Connection | null): boolean =>\n    !!connection &&\n    this._session?.connection?.connectionId === connection.connectionId;\n\n  get participantId() {\n    return this._session?.connection?.connectionId ?? '';\n  }\n\n  get participantConnectionData() {\n    return this._session?.connection?.data ?? '';\n  }\n\n  _setOptimalSubscriberResolutions = () => {\n    Object.values(this._cameraSubscribers).forEach(\n      (cSubscriber: CameraSubscriber) => {\n        cSubscriber.setOptimalPreferredResolution();\n      }\n    );\n  };\n\n  _getCameraSubscriberElement = (subscriberId?: string) => {\n    if (!subscriberId) {\n      return undefined;\n    }\n    return this._cameraSubscribers[subscriberId].getSubscriberElement();\n  };\n\n  _onParticipantNameReceived = (\n    participantWrapper: ParticipantWrapper | LocalParticipantWrapper,\n    name: string\n  ) => {\n    const participantId = participantWrapper.id;\n    if (this.participants[participantId]) {\n      // Set the name\n      this.participants[participantId].name = name;\n      const participant = this.participants[participantId];\n\n      // Make sure we emit participantJoined only one time.\n      if (!participant.isMe && !participant.isParticipantJoinedSent) {\n        participant.isParticipantJoinedSent = true;\n        this.emit('participantJoined', participantWrapper);\n      }\n    }\n  };\n\n  _onSignalReceived = (event: {\n    type?: string;\n    data?: string;\n    from: OT.Connection | null;\n  }) => {\n    const participantSenderWrapper = event.from\n      ? this.participantWrappers[event.from.connectionId]\n      : null;\n    if (\n      participantSenderWrapper &&\n      event.type === 'signal:MP_INTERNAL_PARTICIPANT_NAME' &&\n      !this._isMe(event.from)\n    ) {\n      this._onParticipantNameReceived(\n        participantSenderWrapper,\n        event.data ?? ''\n      );\n      return;\n    }\n    const signalData = {\n      type: event.type,\n      data: event.data,\n      from: participantSenderWrapper,\n      isSentByMe: this._isMe(event.from),\n    };\n    this.emit('signal', signalData);\n  };\n\n  _onCameraSubscriberCreated = (\n    stream: OT.Stream,\n    cameraSubscriber: CameraSubscriber\n  ) => {\n    this._cameraSubscribers[cameraSubscriber.id] = cameraSubscriber;\n    const element = cameraSubscriber.getSubscriberElement();\n    cameraSubscriber.on('created', () => {\n      this._layoutManager.onCameraSubscriberCreated(element);\n    });\n\n    cameraSubscriber.on('destroyed', () => {\n      this._activeSpeakerTracker.onCameraSubscriberDestroyed(\n        cameraSubscriber.id\n      );\n      this._layoutManager?.onCameraSubscriberDestroyed(element);\n      delete this._cameraSubscribers[cameraSubscriber.id];\n    });\n  };\n\n  _onScreenSubscriberCreated = (\n    stream: OT.Stream,\n    screenSubscriber: ScreenSubscriber\n  ) => {\n    this._screenSubscribers[screenSubscriber.id] = screenSubscriber;\n    screenSubscriber.on('created', () => {\n      this._layoutManager.onScreenSubscriberCreated(screenSubscriber.id);\n    });\n\n    screenSubscriber.on('destroyed', () => {\n      const subscriberId = screenSubscriber.id;\n      this._layoutManager.onScreenSubscriberDestroyed(subscriberId);\n      delete this._screenSubscribers[subscriberId];\n    });\n  };\n\n  _onActiveSpeakerStatusChanged = (payload: { isSpeaking: boolean }) => {\n    this._layoutManager.onActiveSpeakerStatusChanged(payload);\n  };\n\n  _onActiveSpeakerChanged = ({\n    newActiveSpeaker,\n    previousActiveSpeaker,\n  }: {\n    newActiveSpeaker: ActiveSpeakerInfo;\n    previousActiveSpeaker: ActiveSpeakerInfo;\n  }) => {\n    const newActiveSpeakerElement = this._getCameraSubscriberElement(\n      newActiveSpeaker.subscriberId\n    );\n\n    const previousActiveSpeakerElement = this._getCameraSubscriberElement(\n      previousActiveSpeaker.subscriberId\n    );\n\n    this._layoutManager.onActiveSpeakerChanged({\n      newActiveSpeakerElement,\n      previousActiveSpeakerElement,\n    });\n    this.emit('activeSpeakerChanged', newActiveSpeaker.participant);\n  };\n\n  _sendParticipantName = (to?: OT.Connection): Promise<void> =>\n    new Promise((resolve, reject) => {\n      this._session.signal(\n        removeUndefinedProperties({\n          to,\n          type: 'MP_INTERNAL_PARTICIPANT_NAME',\n          data: this.participantName,\n        }),\n        err => {\n          if (err) {\n            reject(err);\n          }\n          resolve();\n        }\n      );\n    });\n\n  _shouldEnableParticipantVideo = () =>\n    this.maxVideoParticipantsOnScreen === undefined ||\n    this._visibleParticipantsCount < this.maxVideoParticipantsOnScreen;\n\n  _shouldDisablePublisherMedia = () =>\n    !!this.mediaShutoffThreshold &&\n    Object.keys(this.participants).length > this.mediaShutoffThreshold;\n\n  _onParticipantStreamDestroyed = async () => {\n    this._visibleParticipantsCount =\n      this._visibleParticipantsCount > 0\n        ? this._visibleParticipantsCount - 1\n        : 0;\n  };\n\n  _onParticipantStreamCreated = async (\n    session: OT.Session,\n    stream: OT.Stream,\n    participant: Participant,\n    shouldEnableVideo: boolean\n  ): Promise<void> => {\n    const { videoType } = stream;\n\n    if (videoType === 'screen') {\n      createScreenSubscriber(\n        session,\n        stream,\n        this._analytics,\n        (err, screenSubscriber) => {\n          if (!err && screenSubscriber) {\n            participant.setScreenSubscriber(screenSubscriber);\n            this._onScreenSubscriberCreated(stream, screenSubscriber);\n          }\n        }\n      );\n    } else {\n      createCameraSubscriber(\n        session,\n        stream,\n        shouldEnableVideo,\n        this._analytics,\n        (err, cameraSubscriber) => {\n          if (!err && cameraSubscriber) {\n            participant.setCameraSubscriber(cameraSubscriber);\n            this._onCameraSubscriberCreated(stream, cameraSubscriber);\n            cameraSubscriber.on(\n              'audioLevelUpdated',\n              (audioLevel, movingAvg) => {\n                this._activeSpeakerTracker.onSubscriberAudioLevelUpdated({\n                  subscriberId: cameraSubscriber.id,\n                  movingAvg,\n                  participant,\n                  audioLevel,\n                });\n              }\n            );\n          }\n        }\n      );\n      if (!shouldEnableVideo) {\n        this.emit('cameraSubscriberVideoDisabled', participant.id);\n      }\n      this._visibleParticipantsCount = this._visibleParticipantsCount + 1;\n    }\n  };\n\n  _onCameraSubscriberHiddenByLayoutManager = (subscriberId: string) => {\n    const cameraSubscriber = this._cameraSubscribers[subscriberId];\n    if (cameraSubscriber) {\n      logger.debug(\n        'Camera subscriber to be hidden in layout, unsubscribing to video: ',\n        cameraSubscriber.id\n      );\n      cameraSubscriber.disableVideo();\n    }\n  };\n  _onCameraSubscriberDisplayedByLayoutManager = (subscriberId: string) => {\n    const cameraSubscriber = this._cameraSubscribers[subscriberId];\n    if (cameraSubscriber) {\n      logger.debug(\n        'Camera subscriber to be displayed in layout, subscribing to video: ',\n        cameraSubscriber.id\n      );\n      cameraSubscriber.enableVideo();\n      const videoElement = this._getCameraSubscriberElement(subscriberId);\n      if (videoElement) {\n        this._layoutManager._removeSubscriberOnLoad(videoElement);\n      }\n    }\n  };\n\n  join = async (\n    publisherOptions: {\n      targetElement?: HTMLElement | string;\n      publisherProperties?: OT.PublisherProperties;\n    } = {}\n  ): Promise<void> => {\n    const { targetElement, publisherProperties = {} } = publisherOptions;\n    publisherProperties.name = this.participantName;\n\n    logger.info('Joining room');\n    this._analytics.log(logAction.joinRoom, logVariation.attempt, {\n      publisherOptions,\n    });\n\n    this._attachOTSessionEventListeners();\n\n    let publisherCreated = false;\n    let connected = false;\n\n    const joinFailureCleanup = () => {\n      this._waitUntilJoined.rejector();\n      this._cleanupOnDisconnect();\n      if (publisherCreated) {\n        this.camera.destroyCameraPublisher();\n      }\n      if (connected) {\n        this._session.disconnect();\n      }\n    };\n\n    try {\n      this.camera.on('destroyed', this._onCameraPublisherDestroyed);\n      await this.camera.initPublisher({\n        targetElement,\n        publisherProperties,\n      });\n      publisherCreated = true;\n    } catch (error) {\n      logger.error(\n        'Failed to join room: could not initialize camera publish.',\n        error\n      );\n      this._analytics.log(logAction.joinRoom, logVariation.failure, {\n        error,\n      });\n      joinFailureCleanup();\n      throw error;\n    }\n\n    try {\n      await this._connect();\n      connected = true;\n    } catch (error) {\n      logger.error('Failed to join room: could not connect to session.', error);\n      this._analytics.log(logAction.joinRoom, logVariation.failure, {\n        error,\n      });\n      joinFailureCleanup();\n      throw error;\n    }\n\n    if (this._shouldDisablePublisherMedia()) {\n      this.camera.disableAudio();\n      this.camera.disableVideo();\n      logger.info(\n        'mediaShutoffThreshold reached. Turning off publisher audio and video.'\n      );\n      this.emit('cameraPublisherMediaDisabled');\n    }\n\n    try {\n      await this.camera.publish();\n      logger.debug('Published camera');\n    } catch (error) {\n      logger.error('Failed to join room: failed to publish to session', error);\n      this._analytics.log(logAction.joinRoom, logVariation.failure, {\n        error,\n      });\n      joinFailureCleanup();\n      throw error;\n    }\n\n    this._analytics.log(logAction.joinRoom, logVariation.success);\n    this._waitUntilJoined.resolver();\n    this._layoutManager.updateLayout();\n  };\n\n  _cleanupOnDisconnect = () => {\n    this._removeOTSessionEventListeners();\n    this.camera.off('destroyed', this._onCameraPublisherDestroyed);\n    this._waitUntilJoined = createExternalPromiseResolver();\n    deleteAllEntries(this.participants);\n    deleteAllEntries(this.participantWrappers);\n  };\n\n  leave = (): Promise<void> => {\n    logger.info('Leaving room');\n    this._analytics.log(logAction.leaveRoom, logVariation.attempt);\n    this._cleanupOnDisconnect();\n    return new Promise((resolve, reject) => {\n      try {\n        this._session.on('sessionDisconnected', () => {\n          this._analytics.log(logAction.leaveRoom, logVariation.success);\n          logger.info('Left room');\n          resolve();\n        });\n        this._session.disconnect();\n      } catch (error) {\n        this._analytics.log(logAction.leaveRoom, logVariation.failure, {\n          error,\n        });\n        logger.warn('Error leaving room', error);\n        reject(error);\n      }\n    });\n  };\n  _onCameraPublisherDestroyed = () => {\n    logger.error('Disconnecting room because Camera Publisher was destroyed');\n    this._cleanupOnDisconnect();\n    this._session.disconnect();\n    this.emit('disconnected', 'cameraPublisherError');\n  };\n\n  setLayoutMode = (mode: LayoutMode) => {\n    if (this._layoutManager) {\n      this._layoutManager.setLayoutMode(mode);\n    } else {\n      logger.error(\n        'Attempted to set layout mode, but are not using layout manager.'\n      );\n      throw new Error('Cannot set layout mode when not using layout manager');\n    }\n  };\n\n  startScreensharing = (targetElement?: HTMLElement | string) => {\n    this._analytics.log(logAction.startScreenSharing, logVariation.attempt);\n    return this.screen\n      .start(targetElement)\n      .then(() => {\n        logger.info('Started screen sharing.');\n        this._layoutManager.updateLayout();\n        this._analytics.log(logAction.startScreenSharing, logVariation.success);\n      })\n      .catch(error => {\n        logger.error('Screen sharing failed.');\n        this._analytics.log(\n          logAction.startScreenSharing,\n          logVariation.failure,\n          {\n            error,\n          }\n        );\n        throw error;\n      });\n  };\n\n  stopScreensharing = () => {\n    this._analytics.log(logAction.stopScreenSharing, logVariation.attempt);\n    this.screen.stop();\n    logger.info('Stopped screen sharing.');\n    this._layoutManager.updateLayout();\n    this._analytics.log(logAction.stopScreenSharing, logVariation.success);\n  };\n\n  signal({\n    to,\n    data,\n    type,\n    retryAfterReconnect,\n  }: SignalOptions): Promise<void> {\n    const participant = to && (this.participants[to.id] as Participant);\n    const signalingOptions = removeUndefinedProperties({\n      data,\n      type,\n      retryAfterReconnect,\n      to: participant?.connection,\n    });\n    logger.debug('Sending signal', signalingOptions);\n    return new Promise((resolve, reject) => {\n      this._session.signal(signalingOptions, err => {\n        if (err) {\n          logger.error('Signal failed', err);\n          reject(err);\n        }\n        resolve();\n      });\n    });\n  }\n}\n\nexport default Room;\n","import OT from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport Room from '../../internal/room';\nimport {\n  LayoutMode,\n  ManagedLayoutOptions,\n  RoomProperties,\n  IceConfig,\n} from '../../utils/types';\nimport Participant from '../../internal/participant';\nimport CameraPublisher from '../camera-publisher';\nimport ScreenPublisher from '../screen-publisher';\nimport ParticipantWrapper from '../participant';\nimport { SignalOptions, SignalEvent } from '../../types/signaling';\nimport LocalParticipantWrapper from '../local-participant';\n\ndeclare interface RoomWrapper {\n  on(event: 'connected', listener: () => void): this; // session connected event\n  on(event: 'disconnected', listener: (reason: string) => void): this; // session disconnected event\n  on(event: 'reconnecting', listener: () => void): this; // session reconnecting event\n  on(event: 'reconnected', listener: () => void): this; // session reconnected event\n  on(event: 'cameraPublisherMediaDisabled', listener: () => void): this;\n  on(\n    event: 'cameraSubscriberVideoDisabled',\n    listener: (id: string) => void\n  ): this;\n  on(\n    event: 'participantJoined',\n    listener: (participant: Participant) => void\n  ): this;\n  on(\n    event: 'participantLeft',\n    listener: (participant: Participant, reason: string) => void\n  ): this;\n  on(\n    event: 'activeSpeakerChanged',\n    listener: (participant: Participant) => void\n  ): this;\n  on(event: 'signal', listener: (event: SignalEvent) => void): this;\n}\n\nclass RoomWrapper extends EventEmitter {\n  apiKey: string;\n  roomId: string;\n  token: string;\n  iceConfig?: IceConfig;\n  roomContainer?: HTMLElement | string;\n  managedLayoutOptions?: ManagedLayoutOptions;\n  mediaShutoffThreshold?: number;\n  maxVideoParticipantsOnScreen?: number;\n  camera: CameraPublisher;\n  screen: ScreenPublisher;\n  participants: Record<string, ParticipantWrapper | LocalParticipantWrapper>;\n  participantId?: string;\n  participantName?: string;\n  analytics: any;\n  participantConnectionData?: string;\n\n  join: (publisherOptions?: {\n    targetElement?: HTMLElement | string;\n    publisherProperties?: OT.PublisherProperties;\n  }) => Promise<void>;\n  leave: () => Promise<void>;\n  setLayoutMode: (mode: LayoutMode) => void;\n  startScreensharing: (targetElement?: HTMLElement | string) => Promise<void>;\n  stopScreensharing: () => void;\n  signal: (payload: SignalOptions) => Promise<void>;\n\n  constructor(props: RoomProperties) {\n    super();\n\n    this.apiKey = props.apiKey;\n    this.roomId = props.sessionId;\n    this.token = props.token;\n    this.iceConfig = props.iceConfig;\n    this.roomContainer = props.roomContainer;\n    this.managedLayoutOptions = props.managedLayoutOptions;\n    this.mediaShutoffThreshold = props.mediaShutoffThreshold;\n    this.maxVideoParticipantsOnScreen = props.maxVideoParticipantsOnScreen;\n\n    const room = new Room(props);\n\n    this.camera = room.camera;\n    this.screen = room.screen;\n    this.participants = room.participantWrappers;\n    Object.defineProperty(this, 'participantId', {\n      get: () => room.participantId,\n    });\n    Object.defineProperty(this, 'participantName', {\n      get: () => room.participantName,\n    });\n    Object.defineProperty(this, 'participantConnectionData', {\n      get: () => room.participantConnectionData,\n    });\n\n    const _attachEventsToRoomWrapper = async (): Promise<void> => {\n      room.on('connected', () => {\n        this.emit('connected');\n      });\n\n      room.on('disconnected', (reason: string) =>\n        this.emit('disconnected', reason)\n      );\n\n      room.on('reconnecting', () => {\n        this.emit('reconnecting');\n      });\n\n      room.on('reconnected', () => {\n        this.emit('reconnected');\n      });\n\n      room.on('cameraPublisherMediaDisabled', () => {\n        this.emit('cameraPublisherMediaDisabled');\n      });\n\n      room.on('cameraSubscriberVideoDisabled', (id: string) => {\n        this.emit('cameraSubscriberVideoDisabled', id);\n      });\n\n      room.on('participantJoined', (participant: ParticipantWrapper) => {\n        this.emit('participantJoined', participant);\n      });\n\n      room.on(\n        'participantLeft',\n        (participant: ParticipantWrapper, reason: string) => {\n          this.emit('participantLeft', participant, reason);\n        }\n      );\n\n      room.on('activeSpeakerChanged', (participant: ParticipantWrapper) => {\n        this.emit('activeSpeakerChanged', participant);\n      });\n\n      room.on('signal', (event: SignalEvent) => {\n        // type comes as 'signal:type' or just 'signal'\n        const strippedType = event.type?.split('signal:')?.[1] ?? '';\n        this.emit('signal', event);\n        if (strippedType) {\n          this.emit(`signal:${strippedType}`, event);\n        }\n      });\n    };\n\n    _attachEventsToRoomWrapper();\n\n    this.join = (\n      publisherOptions: {\n        targetElement?: HTMLElement | string;\n        publisherProperties?: OT.PublisherProperties;\n      } = {}\n    ): Promise<void> => room.join(publisherOptions);\n\n    this.leave = () => room.leave();\n\n    this.setLayoutMode = (mode: LayoutMode) => room.setLayoutMode(mode);\n\n    this.startScreensharing = (targetElement?: HTMLElement | string) =>\n      room.startScreensharing(targetElement);\n\n    this.stopScreensharing = () => room.stopScreensharing();\n\n    this.signal = (payload: SignalOptions) => room.signal(payload);\n  }\n}\n\nexport default RoomWrapper;\n","import OT, { Device } from '@opentok/client';\nimport { EventEmitter } from 'events';\nimport Publisher from '../internal/publisher';\nimport { getTargetElementFromDOM } from '../utils/dom';\nimport { Analytics, logAction, logVariation } from '../analytics';\nimport { VideoFilter } from '../utils/types';\n\ndeclare interface PreviewPublisher {\n  on(event: 'audioLevelUpdated', listener: (audioLevel: number) => void): this;\n  on(event: 'created', listener: () => void): this;\n  on(event: 'destroyed', listener: () => void): this;\n  on(event: 'accessAllowed', listener: () => void): this;\n  on(event: 'accessDenied', listener: () => void): this;\n  on(event: 'accessDialogOpened', listener: () => void): this;\n  on(event: 'accessDialogClosed', listener: (reason: string) => void): this;\n}\n\nclass PreviewPublisher extends EventEmitter {\n  private _defaultTargetElement: HTMLElement | string;\n\n  isVideoEnabled: () => boolean;\n  isAudioEnabled: () => boolean;\n  enableVideo: () => void;\n  disableVideo: () => void;\n  enableAudio: () => void;\n  disableAudio: () => void;\n  getVideoDevice: () => Device;\n  setVideoDevice: (deviceId: string) => Promise<void>;\n  getAudioDevice: () => Promise<Device>;\n  setAudioDevice: (deviceId: string) => Promise<void>;\n  destroy: () => void;\n  previewMedia: (publisherOptions: {\n    targetElement?: HTMLElement | string;\n    publisherProperties?: OT.PublisherProperties;\n  }) => Promise<void>;\n  setVideoFilter: (videoFilter: VideoFilter) => Promise<void>;\n  clearVideoFilter: () => Promise<void>;\n  setDisabledImageURI: (imageURI: string) => void;\n\n  constructor(defaultTargetElement: HTMLElement | string) {\n    super();\n    const analytics = new Analytics();\n    this._defaultTargetElement = defaultTargetElement;\n\n    const _publisher = new Publisher();\n\n    const _attachEventsToPreviewPublisher = (): void => {\n      _publisher.on('audioLevelUpdated', (audioLevel: number) => {\n        this.emit('audioLevelUpdated', audioLevel);\n      });\n\n      _publisher.on('videoElementCreated', () => this.emit('created'));\n\n      _publisher.on('destroyed', () => this.emit('destroyed'));\n\n      _publisher.on('accessAllowed', () => this.emit('accessAllowed'));\n\n      _publisher.on('accessDenied', () => this.emit('accessDenied'));\n\n      _publisher.on('accessDialogOpened', () =>\n        this.emit('accessDialogOpened')\n      );\n\n      _publisher.on('accessDialogClosed', (reason: string) =>\n        this.emit('accessDialogClosed', reason)\n      );\n    };\n\n    this.isVideoEnabled = (): boolean => _publisher.isVideoEnabled();\n\n    this.isAudioEnabled = (): boolean => _publisher.isAudioEnabled();\n\n    this.enableVideo = (): void => {\n      analytics.log(\n        logAction.previewPublisherEnableVideo,\n        logVariation.attempt\n      );\n      _publisher.enableVideo();\n      analytics.log(\n        logAction.previewPublisherEnableVideo,\n        logVariation.success\n      );\n    };\n\n    this.disableVideo = (): void => {\n      analytics.log(\n        logAction.previewPublisherDisableVideo,\n        logVariation.attempt\n      );\n      _publisher.disableVideo();\n      analytics.log(\n        logAction.previewPublisherDisableVideo,\n        logVariation.success\n      );\n    };\n\n    this.enableAudio = (): void => {\n      analytics.log(\n        logAction.previewPublisherEnableAudio,\n        logVariation.attempt\n      );\n      _publisher.enableAudio();\n      analytics.log(\n        logAction.previewPublisherEnableAudio,\n        logVariation.success\n      );\n    };\n\n    this.disableAudio = (): void => {\n      analytics.log(\n        logAction.previewPublisherDisableAudio,\n        logVariation.attempt\n      );\n      _publisher.disableAudio();\n      analytics.log(\n        logAction.previewPublisherDisableAudio,\n        logVariation.success\n      );\n    };\n\n    this.getVideoDevice = (): Device => _publisher.getVideoDevice();\n\n    this.setVideoDevice = (deviceId: string): Promise<void> =>\n      _publisher.setVideoDevice(deviceId);\n\n    this.getAudioDevice = (): Promise<Device> => _publisher.getAudioDevice();\n\n    this.setAudioDevice = (deviceId: string): Promise<void> =>\n      _publisher.setAudioDevice(deviceId);\n\n    this.destroy = (): void => {\n      analytics.log(logAction.destroyPreviewPublisher, logVariation.attempt);\n      _publisher.destroyOTPublisher();\n      analytics.log(logAction.destroyPreviewPublisher, logVariation.success);\n    };\n\n    this.previewMedia = async (\n      publisherOptions: {\n        targetElement?: HTMLElement | string;\n        publisherProperties?: OT.PublisherProperties;\n      } = {}\n    ): Promise<void> => {\n      const { targetElement, publisherProperties } = publisherOptions;\n      analytics.log(logAction.initPreviewPublisher, logVariation.attempt, {\n        publisherProperties,\n      });\n      const target = getTargetElementFromDOM(\n        targetElement ?? this._defaultTargetElement\n      );\n      try {\n        _attachEventsToPreviewPublisher();\n        await _publisher.initOTPublisher(target, publisherProperties);\n        analytics.log(logAction.initPreviewPublisher, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.initPreviewPublisher, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n\n    this.setVideoFilter = async (videoFilter: VideoFilter) => {\n      try {\n        analytics.log(logAction.setVideoFilter, logVariation.attempt);\n        await _publisher.setVideoFilter(videoFilter);\n        analytics.log(logAction.setVideoFilter, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.setVideoFilter, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n\n    this.clearVideoFilter = async () => {\n      analytics.log(logAction.clearVideoFilter, logVariation.attempt);\n      try {\n        await _publisher.clearVideoFilter();\n        analytics.log(logAction.clearVideoFilter, logVariation.success);\n      } catch (error) {\n        analytics.log(logAction.clearVideoFilter, logVariation.failure, {\n          error,\n        });\n        throw error;\n      }\n    };\n    this.setDisabledImageURI = (imageURI: string): void => {\n      _publisher.setDisabledImageURI(imageURI);\n    };\n  }\n}\n\nexport default PreviewPublisher;\n","import OT, { AudioOutputDevice } from '@opentok/client';\nimport { Analytics, logAction, logVariation } from '../analytics';\n\nconst analytics = new Analytics();\n\nconst getActiveAudioOutputDevice = async (): Promise<AudioOutputDevice> => {\n  analytics.log(logAction.getActiveAudioOutputDevice, logVariation.attempt);\n  try {\n    const activeDevice = await OT.getActiveAudioOutputDevice();\n    analytics.log(logAction.getActiveAudioOutputDevice, logVariation.success);\n    return activeDevice;\n  } catch (error) {\n    analytics.log(logAction.getActiveAudioOutputDevice, logVariation.failure);\n    throw new Error('Not able to get active audio output device');\n  }\n};\n\nexport default getActiveAudioOutputDevice;\n","import OT, { AudioOutputDevice } from '@opentok/client';\nimport { Analytics, logAction, logVariation } from '../analytics';\n\nconst analytics = new Analytics();\n\nconst getAudioOutputDevices = async (): Promise<AudioOutputDevice[]> => {\n  analytics.log(logAction.getAudioOutputDevices, logVariation.attempt);\n  try {\n    const devices = await OT.getAudioOutputDevices();\n    analytics.log(logAction.getAudioOutputDevices, logVariation.success);\n    return devices;\n  } catch (error) {\n    analytics.log(logAction.getAudioOutputDevices, logVariation.failure);\n    throw new Error('Not able to get available audio output device');\n  }\n};\n\nexport default getAudioOutputDevices;\n","import OT from '@opentok/client';\nimport { Analytics, logAction, logVariation } from '../analytics';\nimport ConfigStore from './config-store';\n\n// Sets up proxies for both OT and VE\nconst setProxyUrl = async (proxyUrl: string): Promise<void> => {\n  ConfigStore.setProxyUrl(proxyUrl);\n\n  try {\n    // Makes sure that OT-specific requests and events are proxied\n    OT.setProxyUrl(proxyUrl);\n\n    // Note: we instantiate after URL is configured\n    const analytics = new Analytics();\n\n    // Yes, this `attempt` log is misleading.  We log the attempt after we\n    // already did it.  We can't log before setting the proxy url, since the\n    // event will leak and not go through the proxy.\n    analytics.log(logAction.setProxyUrl, logVariation.attempt);\n    analytics.log(logAction.setProxyUrl, logVariation.success);\n  } catch (error) {\n    // Note: we don't bother to generate a client event log for this\n    // failture.  We just throw instead.  Reason being, we don't want any\n    // logs to leak out.  Logs and requests *must* go through the proxy.\n    throw new Error('There is an issue with URL provided.');\n  }\n};\n\nexport default setProxyUrl;\n","import OT from '@opentok/client';\nimport { Analytics, logAction, logVariation } from '../analytics';\nimport { logger } from '../logging';\n\nconst setAudioOutputDevice = async (deviceId: string): Promise<void> => {\n  const analytics = new Analytics();\n  analytics.log(logAction.setAudioOutputDevice, logVariation.attempt);\n  try {\n    logger.info('Set audio output device: ', deviceId);\n    await OT.setAudioOutputDevice(deviceId);\n    analytics.log(logAction.setAudioOutputDevice, logVariation.success);\n  } catch (error) {\n    analytics.log(logAction.setAudioOutputDevice, logVariation.failure);\n    logger.warn('Not able to set the audio output device', deviceId);\n    throw new Error('Not able to set the audio output device');\n  }\n};\n\nexport default setAudioOutputDevice;\n","import OT from '@opentok/client';\n\nexport default () => OT.hasMediaProcessorSupport();\n","import Room from './mp/room';\nimport PreviewPublisher from './mp/preview-publisher';\nimport getDevices from './mp/get-devices';\nimport getActiveAudioOutputDevice from './mp/get-active-audio-output-device';\nimport getAudioOutputDevices from './mp/get-audio-output-devices';\nimport setProxyUrl from './mp/set-proxy-url';\nimport setAudioOutputDevice from './mp/set-audio-output-device';\nimport hasMediaProcessorSupport from './mp/has-media-processor-support';\nimport { setLogLevel, logLevel } from './logging';\nimport { Device, DeviceKind } from './types/device';\nconst { publicVersion: version } = require('../package.json');\n\nexport {\n  Room,\n  PreviewPublisher,\n  version,\n  getActiveAudioOutputDevice,\n  getDevices,\n  getAudioOutputDevices,\n  setAudioOutputDevice,\n  setLogLevel,\n  setProxyUrl,\n  hasMediaProcessorSupport,\n  logLevel,\n  Device,\n  DeviceKind,\n};\n"],"names":["runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","getTargetElementFromDOM","element","HTMLElement","ele","document","getElementById","createDiv","id","style","createElement","entries","setProperty","jss","setup","preset","use","camelCase","createStyles","styles","createStyleSheet","attach","classes","logLevel","NONE","ERROR","WARN","INFO","DEBUG","currentLogLevel","setLogLevel","level","includes","console","logger","warn","debug","removeItem","array","item","index","indexOf","splice","HiddenTileTracker","maxVideoParticipantsOnScreen","PARTICIPANT_DISPLAY_LIMIT","_removeLastActiveVisibleElement","lastActiveVisibleElement","visibleElements","_elementsOrderedByDisplayPriority","hiddenElements","onActiveSpeakerChanged","_currentActiveSpeakerElement","onSubscriberCreated","onSubscriberRemoved","elementToShow","audioButton","position","left","bottom","height","width","background","backdropFilter","borderRadius","opacity","display","icon","createSvgIcon","svgSrc","src","otherClasses","classList","add","createAudioToggleButton","isAudioEnabled","enabledIcon","disabledIcon","button","appendChild","setEnabled","remove","setDisabled","createPublisherAudioToggleButton","iconMicMuted","iconMicEnabled","createSubscriberAudioToggleButton","iconAudioMuted","iconAudioEnabled","paddingLeft","paddingRight","textAlign","fontSize","fontStyle","lineHeight","whiteSpace","overflow","textOverflow","maxWidth","marginLeft","createNameDisplay","div","innerText","networkQualityWarning","justifyContent","alignItems","minWidth","networkQualityIcon","active","createNetworkQualityWarning","iconNetworkQualityPoor","show","hide","videoOverlay","zIndex","bottomRightContainer","top","right","createOverlay","targetId","participantName","targetVideoContainerDiv","overlayClass","overlayId","audioToggleButton","overlayDiv","nameElement","overlay","assign","EventEmitter","setAudioEnabled","setAudioDisabled","showNetworkQualityWarning","hideNetworkQualityWarning","addEventListener","emit","createPublisherOverlay","createSubscriberOverlay","Subscriber","otSubscriber","_subscribingToAudio","disableAudio","enableAudio","stream","hasVideo","hasAudio","shouldSubscribe","subscribeToVideo","subscribeToAudio","imageURI","setStyle","_onAudioLevelUpdated","event","audioLevel","audioLevelUpdatedHandler","throttle","leading","trailing","on","videoType","_toggleAudioEnabled","reason","proxyUrl","ConfigStore","setProxyUrl","url","getProxyUrl","logVariation","attempt","success","failure","logAction","initRoom","joinRoom","leaveRoom","startScreenSharing","stopScreenSharing","publishCameraPublisher","destroyCameraPublisher","cameraPublisherEnableVideo","cameraPublisherEnableAudio","cameraPublisherDisableVideo","cameraPublisherDisableAudio","screenPublisherEnableVideo","screenPublisherEnableAudio","screenPublisherDisableVideo","screenPublisherDisableAudio","cameraSubscriberEnableVideo","cameraSubscriberEnableAudio","cameraSubscriberDisableVideo","cameraSubscriberDisableAudio","screenSubscriberEnableVideo","screenSubscriberEnableAudio","screenSubscriberDisableVideo","screenSubscriberDisableAudio","initPreviewPublisher","destroyPreviewPublisher","previewPublisherEnableVideo","previewPublisherEnableAudio","previewPublisherDisableVideo","previewPublisherDisableAudio","setVideoDevice","setAudioDevice","getAudioOutputDevices","getActiveAudioOutputDevice","getVideoDevice","getAudioDevice","getDevices","createCameraSubscriber","createScreenSubscriber","setAudioOutputDevice","setVideoFilter","clearVideoFilter","defaultProps","source","window","location","origin","Analytics","analyticsProps","sessionId","connectionId","apiKey","sessionInfo","partnerId","analytics","addSessionInfo","action","variation","payload","data","logEvent","otkanalyticsData","clientVersion","componentId","options","OTKAnalytics","update","smileIconDataURI","subscriberOnLoad","CameraSubscriber","_stream","movingAvg","_subscriber","Math","log","LN10","min","max","setOptimalPreferredResolution","videoElementWidth","offsetWidth","videoElementHeight","offsetHeight","preferredResolution","devicePixelRatio","setPreferredResolution","getSubscriberElement","isVideoEnabled","enableVideo","disableVideo","setDisabledImageURI","session","shouldEnableVideo","callback","_otSubscriber","subscribe","insertMode","buttonDisplayMode","nameDisplayMode","videoDisabledDisplayMode","backgroundImageURI","iconSmileyFace","cameraSubscriber","LARGE_CLASS_NAME","DEFAULT_MOBILE_PARTICIPANTS","DEFAULT_DESKTOP_PARTICIPANTS","ACTIVE_SPEAKER_HIGHLIGHT_CLASS","DEFAULT_ACTIVE_SPEAKER_COLOR","defaultLayoutOptions","fixedRatio","bigPercentage","bigFixedRatio","bigAlignItems","smallAlignItems","Infinity","maxHeight","smallMaxWidth","smallMaxHeight","bigMaxWidth","bigMaxHeight","bigMaxRatio","bigMinRatio","bigFirst","fixedLayoutOptions","bigClass","animate","ignoreClass","getClasses","speakerHighlightColor","outerMargin","marginOffset","layoutContainer","margin","borderColor","borderWidth","borderStyle","layoutContainerWrapper","LayoutManager","targetElement","layoutOptions","roomContainerElement","roomContainer","layoutContainerElement","layoutContainerWrapperElement","_speakerHighlightColor","throttledRecalculateLayout","_recalculateTileSizes","resizeObserver","ResizeObserverPolyfill","observe","_layoutContainerElement","layoutMode","_layoutMode","updateLayout","currentStyle","getComputedStyle","_cameraSubscriberElementIds","childNodes","node","_setElementSmall","_screenSharingElementIds","_setElementBig","elementToSetBig","_getActiveSpeakerViewLargeElement","_setAllElementsSmall","_activeSpeakerElement","subscriber","querySelector","publisher","_hideElement","_displayElement","_hiddenTileTracker","subscriberId","isViewingScreenshare","customOTLayoutJsOptions","_isMobileLayout","isMobileLayout","_speakerHighlightEnabled","speakerHighlightEnabled","maxRatio","minRatio","_initLayoutContainerElement","_emitLayoutRecalculated","debounce","_layoutContainer","initLayout","_initContainerResizeListener","newActiveSpeakerElement","previousActiveSpeakerElement","onActiveSpeakerStatusChanged","isSpeaking","addOrRemoveClass","layout","getLayoutContainerElement","_displayOnlyScreenElement","_displayOnlyActiveSpeaker","_displayLimitedGridElements","_setOnlyScreenElementsBig","_setOnlyActiveSpeakerElementBig","OT","devices","getDeviceIdFromSettings","track","getSettings","deviceId","getDeviceIdFromDevicesList","currentDevice","find","device","label","getDeviceId","_attachEventsToOTPublisher","onDestroyed","_onVideoElementCreated","_initPublisherForCamera","_otPublisher","initPublisher","otPublisher","_initPublisherForScreen","checkScreenSharingCapability","response","supported","extensionRegistered","videoSource","showControls","videoContentHint","Publisher","publisherOptions","_otPublisherPromise","divId","getVideoSource","getAudioSource","enabled","publishVideo","publishAudio","videoDevice","kind","videoDeviceId","setVideoSource","audioDeviceId","setAudioSource","destroy","videoFilter","applyVideoFilter","CameraPublisher","defaultTargetElement","_defaultTargetElement","_publisher","_attachEventsToCameraPublisher","audioDevice","destroyOTPublisher","publisherProperties","target","initOTPublisher","publish","getOTPublisher","NOT_SCREEN_SHARING_ERROR","ScreenPublisher","_attachEventsToScreenPublisher","start","screenPub","isScreenSharing","ScreenSubscriber","screenSubscriber","SPEAKER_DETECTED_FIRST_TIME_INTERVAL","LOW_AUDIO_DETECTED_INTERVAL","MIN_AUDIO_LEVEL","SpeakerDetection","onAudioLevelUpdated","now","Date","isTalking","activity","timestamp","talking","CALCULATE_ACTIVE_SPEAKER_THROTTLE_TIME","ActiveSpeakerTracker","_subscriberAudioLevelsBySubscriberId","_participantsBySubscriberId","activeSpeaker","participant","calculateActiveSpeaker","speakerDetection","subscriberIdAudioLevelKeyValuePair","reduce","acc","previousActiveSpeaker","newActiveSpeaker","_calculateActiveSpeaker","Participant","connection","connectionData","setCameraSubscriber","camera","setScreenSubscriber","screen","ParticipantWrapper","get","removeUndefinedProperties","properties","propName","deleteAllEntries","MAX_MOBILE_WIDTH","uaParser","UAParser","navigator","userAgent","uaDevice","getDevice","hasTouchScreen","maxTouchPoints","query","matchMedia","matches","hasMobileScreenWidth","isMobile","createExternalPromiseResolver","resolver","rejector","promise","LocalParticipant","LocalParticipantWrapper","localParticipant","PARTICIPANT_NAME_RECEIVED_TIMEOUT","Room","roomProperties","_session","_waitUntilJoined","participants","isMe","_onParticipantStreamCreated","_shouldEnableParticipantVideo","_onParticipantStreamDestroyed","useMobileLayout","_createParticipant","participantWrapper","_isMe","_sendParticipantName","setTimeout","_onParticipantNameReceived","participantId","isParticipantJoinedSent","participantWrappers","_onSignalReceived","_createLocalParticipant","_createRemoteParticipant","off","body","managedLayoutOptions","screenPublisherContainer","cameraPublisherContainer","customContainer","_layoutManager","connect","token","_analytics","_cameraSubscribers","cSubscriber","participantSenderWrapper","from","signalData","isSentByMe","onCameraSubscriberCreated","_activeSpeakerTracker","onCameraSubscriberDestroyed","_screenSubscribers","onScreenSubscriberCreated","onScreenSubscriberDestroyed","_getCameraSubscriberElement","to","signal","_visibleParticipantsCount","mediaShutoffThreshold","_onScreenSubscriberCreated","_onCameraSubscriberCreated","onSubscriberAudioLevelUpdated","videoElement","_removeSubscriberOnLoad","_attachOTSessionEventListeners","publisherCreated","connected","joinFailureCleanup","_cleanupOnDisconnect","disconnect","_onCameraPublisherDestroyed","_connect","_shouldDisablePublisherMedia","_removeOTSessionEventListeners","mode","setLayoutMode","iceConfig","roomId","_createDefaultRoomContainer","deviceLayoutMode","initSession","_setOptimalSubscriberResolutions","_onCameraSubscriberHiddenByLayoutManager","_onCameraSubscriberDisplayedByLayoutManager","_getDefaultPublisherElement","_onActiveSpeakerChanged","_onActiveSpeakerStatusChanged","retryAfterReconnect","signalingOptions","RoomWrapper","props","room","participantConnectionData","_attachEventsToRoomWrapper","strippedType","split","join","leave","startScreensharing","stopScreensharing","PreviewPublisher","_attachEventsToPreviewPublisher","previewMedia","activeDevice","hasMediaProcessorSupport","require","version","publicVersion"],"mappings":"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"}